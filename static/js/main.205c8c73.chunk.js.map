{"version":3,"sources":["pages/profile/profile.module.css","components/ModalOverlay/ModalOverlay.module.css","components/OrderIngredientModal/OrderIngredientModal.module.css","components/BurgerIngredients/BurgerIngredients.module.css","components/OrderIngredients/OrderIngredients.module.css","services/utils.ts","services/actions/order-history-actions.ts","services/actions/authorization-actions.ts","utils/burger-api.ts","services/actions/app-actions.ts","components/ProtectedRoute/ProtectedRoute.tsx","components/BurgerIngredients/Ingredient.tsx","services/actions/interface-actions.ts","components/BurgerIngredients/BurgerIngredients.tsx","components/BurgerConstructor/BurgerConstructorIngredients.tsx","components/BurgerConstructor/BurgerConstructor.tsx","pages/home/home.tsx","components/AuthenticationForm/AuthenticationForm.tsx","components/LoginForm/LoginForm.tsx","pages/login/login.tsx","components/RegisterForm/RegisterForm.tsx","pages/register/register.tsx","components/ForgotPasswordForm/ForgotPasswordForm.tsx","pages/forgot-password/forgot-password.tsx","components/ResetPasswordForm/ResetPasswordForm.tsx","pages/reset-password/reset-password.tsx","pages/not-found-404-page/not-found-404-page.tsx","components/PersonalArea/PersonalAreaMenu.tsx","components/PersonalArea/PersonalAreaForm.tsx","pages/profile/profile.tsx","services/hooks/index.ts","components/OrderBox/OrderBox.tsx","pages/orders-history/orders-history.tsx","components/IngredientDetails/IngredientDetails.tsx","pages/burger-ingredient-page/burger-ingredient-page.tsx","components/ModalOverlay/ModalOverlay.tsx","components/Modal/Modal.tsx","pages/burger-ingredient-modal/burger-ingredient-modal.tsx","images/done.svg","components/OrderDetails/OrderDetails.tsx","pages/order-details-modal/order-details-modal.tsx","pages/order-tape-page/order-tape-page.tsx","components/OrderIngredients/OrderIngredientsInfo.tsx","components/OrderIngredients/OrderIngredients.tsx","components/OrderIngredientModal/OrderIngredientModal.tsx","pages/order-ingredient-modal-page/order-ingredient-modal-page.tsx","pages/order-ingredient-page/order-ingredient-page.tsx","components/App/ModalSwitch.tsx","components/AppHeader/AppHeader.tsx","services/actions/order-tape-actions.ts","components/App/App.tsx","reportWebVitals.ts","services/reducers/interface-reducer.ts","services/reducers/app-reducer.ts","services/reducers/authorization-reducer.ts","services/reducers/order-tape-reducer.ts","services/reducers/order-history-reducer.ts","services/reducers/rootReducer.ts","index.tsx","components/OrderBox/OrderBox.module.css","components/BurgerConstructor/BurgerConstructor.module.css","components/LoginForm/LoginForm.module.css","components/AppHeader/AppHeader.module.css","components/PersonalArea/PersonalAreaForm.module.css","components/IngredientDetails/IngredientDetails.module.css","pages/order-tape-page/order-tape-page.module.css","components/RegisterForm/RegisterForm.module.css","components/ForgotPasswordForm/ForgotPasswordForm.module.css","components/ResetPasswordForm/ResetPasswordForm.module.css","components/Modal/Modal.module.css","pages/home/home.module.css","pages/burger-ingredient-page/burger-ingredient-page.module.css","components/AuthenticationForm/AuthenticationForm.module.css","pages/orders-history/order-history.module.css"],"names":["module","exports","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","props","exp","_objectSpread","path","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","deleteCookie","WS_ORDER_HISTORY_CONNECTION_INIT","WS_ORDER_HISTORY_CONNECTION_SUCCESS","WS_ORDER_HISTORY_CONNECTION_ERROR","WS_ORDER_HISTORY_CONNECTION_CLOSED","WS_ORDER_HISTORY_GET_MESSAGE","axios","require","COOKIE_EXPIRE_SEC","userDataUrl","SET_FORM_NAME","SET_FORM_EMAIL","SET_FORM_PASSWORD","SET_LOGIN","SET_ERROR","SET_REDIRECT_TO_MAIN","UNSET_REDIRECT_TO_MAIN","SET_LOGOUT","SET_REDIRECT_TO_RESET_PASSWORD","SET_REDIRECT_TO_LOGIN","SET_CONFIRMATION_CODE","UNSET_ERROR","SET_REDIRECT_TO_LOGIN_FOR_ORDER","UNSET_REDIRECT_TO_LOGIN_FOR_ORDER","SET_REDIRECT_TO_ORDER_DETAILS","UNSET_REDIRECT_TO_ORDER_DETAILS","refreshAccessToken","dispatch","post","token","concat","then","data","accessToken","split","refreshToken","catch","error","catchError","setForm","email","arguments","length","password","type","formName","formEmail","formPassword","_error$response","errorDescription","response","message","getUserData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","get","headers","authorization","user","_error$response2","stop","_x","apply","BASE_URL","getDataUrl","postOrderUrl","SET_DATA","SET_MAIN_ERROR","SET_ORDER_NUMBER","DELETE_INGREDIENT_FROM_INGREDIENTS","REPLACE_INNER_DRAG_INGREDIENT","SET_ADDED_INGREDIENT","getOrder","ingredients","bun","ingredientsId","orderInfo","map","el","_id","_toConsumableArray","orderNumber","order","number","ProtectedRoute","onlyUnAuth","children","rest","_objectWithoutProperties","_excluded","isAuthorized","location","useLocation","from","state","pathname","_jsx","Route","Redirect","to","Ingredient","counter","_useDrag","useDrag","item","collect","monitor","isDrag","isDragging","_useDrag2","_slicedToArray","dragRef","dragStyle","opacity","ref","style","_jsxs","className","styles","ingredient","src","image","alt","ingredientPrice","price","CurrencyIcon","ingredientName","Counter","count","size","SET_CURRENT_BURGER_INGREDIENTS_NAME","BurgerIngredients","_useSelector","useSelector","store","appReducer","currentBurgerIngredientsName","interfaceReducer","useDispatch","burgerIngredients","display","href","Tab","active","onClick","ingredientsName","scrollbar","onScroll","e","target","scrollTop","id","burgerIngredientsContainer","Link","background","ingredientContainer","filter","element","BurgerConstructorInnerIngredients","index","useRef","_useDrop","useDrop","accept","isHover","isOver","hover","_ref$current","current","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","getItem","dropInner","dragElStyle","dragInner","mainIngredients","DragIcon","ConstructorElement","text","thumbnail","handleClose","key","BurgerConstructor","_useSelector2","authorizationReducer","redirectToLoginForOrder","redirectToOrderDetails","totalPrice","reduce","acc","drop","isDragContainer","canDrop","_useDrop2","dropTarget","burgerConstructorIngredientPlaceStyle","border","burgerConstructor","burgerConstructorIngredientPlace","isLocked","orderContainer","totalPriceContainer","Button","htmlType","HomePage","_Fragment","main","container","DndProvider","backend","HTML5Backend","AuthenticationForm","flexColumnCenter","Logo","LoginForm","redirectToMain","useEffect","textAlign","onSubmit","preventDefault","finally","EmailInput","onChange","PasswordInput","displayFlex","link","LoginPage","RegisterForm","Input","placeholder","RegisterPage","ForgotPasswordForm","redirectToResetPassword","ForgotPasswordPage","ResetPasswordForm","formConfirmationCode","redirectToLogin","_useState","useState","_useState2","isPasswordShow","setPasswordShow","inputRef","icon","onIconClick","_inputRef$current","focus","ResetPasswordPage","redirect","useHistory","NotFoundPage","margin","maxWidth","flexDirection","alignItems","color","PersonalAreaMenu","description","NavLink","exact","activeClassName","colorActive","cursor","PersonalAreaForm","isNameEdit","setNameEdit","_useState3","_useState4","isLoginEdit","setLoginEdit","_useState5","_useState6","isPasswordEdit","setPasswordEdit","_useState7","_useState8","changeButtons","setChangeButtons","NameRef","React","LoginRef","PassRef","param","_NameRef$current","_LoginRef$current","_PassRef$current","_ref2","_callee2","_context2","patch","_x2","onFocus","onBlur","cancelButton","ProfilePage","selectorHook","OrderBox","setIngredients","elem","dateToString","useCallback","inputDate","createdAt","FormattedDate","date","flexSpaceBetween","priceContainer","_ingredients$","image_mobile","ingredientImage","_","backgroundImage","backgroundPosition","backgroundRepeat","lastIngredientImage","Number","OrdersHistoryPage","wsOrderHistoryReducer","errorWSOrderHistory","orders","IngredientDetails","selectedIngredient","image_large","informationContainer","flexCenter","calories","proteins","fat","carbohydrates","BurgerIngredientPage","useParams","modal","modalHeader","modalMain","ModalOverlay","handleModalClose","modalOverlay","modalRoot","getElementById","Modal","title","closeModalWindowByEsc","addEventListener","removeEventListener","ReactDOM","createPortal","modalButton","CloseIcon","BurgerIngredientModal","history","push","OrderDetails","doneImg","OrderDetailsModal","OrderTapePage","wsOrderTapeReducer","total","totalToday","errorWSOrderTape","innerContainer","feedContainer","infoContainer","ordersBoard","status","OrderIngredientInfo","_ingredient","qty","JSON","parse","OrderIngredients","isModal","dateNow","outputDate","getMonth","getDate","getFullYear","outputTime","getHours","getMinutes","GMT","getUTCHours","justifyContentCenter","justifyContent","scrollContainer","Object","entries","marginTop","_ref3","val","OrderIngredientModal","OrderIngredientModalPage","profile","selectedOrder","stringify","OrderIngredientPage","ModalSwitch","action","Switch","Header","isConstructor","useRouteMatch","isProfile","isOrderTape","header","menu","flex","menuItems","BurgerIcon","ListIcon","personalArea","ProfileIcon","WS_ORDER_TAPE_CONNECTION_INIT","WS_ORDER_TAPE_CONNECTION_SUCCESS","WS_ORDER_TAPE_CONNECTION_ERROR","WS_ORDER_TAPE_CONNECTION_CLOSED","WS_ORDER_TAPE_GET_MESSAGE","App","authorized","HashRouter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","wsOrderTapeConnected","wsOrderHistoryConnected","rootReducer","combineReducers","newState","dragCard","newArray","splice","_action$payload","payload","createStore","composeWithDevTools","applyMiddleware","thunk","socket","_socket","WebSocket","close","onopen","event","onmessage","_JSON$parse","onerror","onclose","parsedData","restParsedData","success","reverse","render","Provider"],"mappings":"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","file":"static/js/main.205c8c73.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"profile_container__1Jcdd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalOverlay\":\"ModalOverlay_modalOverlay__PEjcI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"OrderIngredientModal_modal__3Jqi3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerIngredients\":\"BurgerIngredients_burgerIngredients__3y1fi\",\"tabs\":\"BurgerIngredients_tabs__2PkhN\",\"tabItems\":\"BurgerIngredients_tabItems__2Nbd2\",\"scrollbar\":\"BurgerIngredients_scrollbar__3mLlW\",\"burgerIngredientsContainer\":\"BurgerIngredients_burgerIngredientsContainer__3jVsl\",\"ingredientContainer\":\"BurgerIngredients_ingredientContainer__1m2_r\",\"ingredient\":\"BurgerIngredients_ingredient__2-MD-\",\"ingredientPrice\":\"BurgerIngredients_ingredientPrice__227Y7\",\"ingredientName\":\"BurgerIngredients_ingredientName__1vh2D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OrderIngredients_container__1lRsP\",\"modalHeader\":\"OrderIngredients_modalHeader__3M05V\",\"displayFlex\":\"OrderIngredients_displayFlex__1l0hl\",\"ingredientImage\":\"OrderIngredients_ingredientImage__riL1T\",\"scrollContainer\":\"OrderIngredients_scrollContainer__3dID2\",\"modalMain\":\"OrderIngredients_modalMain__1pSmP\"};","/* eslint-disable no-useless-escape */\r\n\r\nimport { TCookiePropsType } from \"./types\";\r\n\r\nexport function getCookie(name: string) {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\r\n      \"(?:^|; )\" +\r\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\r\n        \"=([^;]*)\"\r\n    )\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport const setCookie = (\r\n  name: string,\r\n  value: string | number | boolean,\r\n  props?: TCookiePropsType\r\n) => {\r\n  props = {\r\n    path: \"/\",\r\n    ...props,\r\n  };\r\n  let exp = props.expires;\r\n  const d = new Date();\r\n  if (typeof exp == \"number\" && exp) {\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = +d;\r\n  }\r\n  if (exp && d.toUTCString) {\r\n    props.expires = d.toUTCString();\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + \"=\" + value;\r\n  for (const propName in props) {\r\n    updatedCookie += \"; \" + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += \"=\" + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n};\r\n\r\nexport function deleteCookie(name: string) {\r\n  setCookie(name, false, { expires: -1 });\r\n}\r\n","import { AnyAction, MiddlewareAPI } from \"redux\";\r\nimport { getCookie } from \"../utils\";\r\nimport { refreshAccessToken } from \"./authorization-actions\";\r\nimport { TOrderData } from \"../types\";\r\nconst url = \"wss://norma.nomoreparties.space/orders\";\r\n\r\nexport const WS_ORDER_HISTORY_CONNECTION_INIT = \"WS_ORDER_HISTORY_CONNECTION_INIT\";\r\nexport const WS_ORDER_HISTORY_CONNECTION_SUCCESS = \"WS_ORDER_HISTORY_CONNECTION_SUCCESS\";\r\nexport const WS_ORDER_HISTORY_CONNECTION_ERROR = \"WS_ORDER_HISTORY_CONNECTION_ERROR\";\r\nexport const WS_ORDER_HISTORY_CONNECTION_CLOSED = \"WS_ORDER_HISTORY_CONNECTION_CLOSED\";\r\nexport const WS_ORDER_HISTORY_GET_MESSAGE = \"WS_ORDER_HISTORY_GET_MESSAGE\";\r\n\r\nexport interface IOrderHistoryConnectionInitAction {\r\n  readonly type: typeof WS_ORDER_HISTORY_CONNECTION_INIT;\r\n}\r\n\r\nexport interface IOrderHistoryConnectionSuccessAction {\r\n  readonly type: typeof WS_ORDER_HISTORY_CONNECTION_SUCCESS;\r\n}\r\n\r\nexport interface IOrderHistoryConnectionErrorAction {\r\n  readonly type: typeof WS_ORDER_HISTORY_CONNECTION_ERROR;\r\n}\r\n\r\nexport interface IOrderHistoryConnectionClosedAction {\r\n  readonly type: typeof WS_ORDER_HISTORY_CONNECTION_CLOSED;\r\n}\r\n\r\nexport interface IOrderHistoryConnectionGetMessageAction {\r\n  readonly type: typeof WS_ORDER_HISTORY_GET_MESSAGE;\r\n  payload: Array<TOrderData>;\r\n}\r\n\r\nexport type TOrderHistoryActions =\r\n  | IOrderHistoryConnectionInitAction\r\n  | IOrderHistoryConnectionSuccessAction\r\n  | IOrderHistoryConnectionErrorAction\r\n  | IOrderHistoryConnectionClosedAction\r\n  | IOrderHistoryConnectionGetMessageAction;\r\n\r\nexport const orderHistorySocketMiddleware = () => {\r\n  return (store: MiddlewareAPI) => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return (next: (i: AnyAction) => void) => (action: AnyAction) => {\r\n      const { dispatch } = store;\r\n      const { type } = action;\r\n      if (type === WS_ORDER_HISTORY_CONNECTION_INIT) {\r\n        const accessToken = getCookie(\"accessToken\");\r\n        socket = new WebSocket(`${url}?token=${accessToken}`);\r\n      }\r\n      if (type === WS_ORDER_HISTORY_CONNECTION_CLOSED) {\r\n        socket?.close();\r\n      }\r\n      if (socket) {\r\n        socket.onopen = (event) => {\r\n          dispatch({\r\n            type: WS_ORDER_HISTORY_CONNECTION_SUCCESS,\r\n            payload: event,\r\n          });\r\n        };\r\n        socket.onmessage = (event) => {\r\n          const { data } = event;\r\n          const parsedData = JSON.parse(data);\r\n          const { success, ...restParsedData } = parsedData;\r\n          if (\r\n            restParsedData.message &&\r\n            restParsedData.message === \"jwt expired\"\r\n          ) {\r\n            refreshAccessToken(dispatch).then(() =>\r\n              dispatch({ type: WS_ORDER_HISTORY_CONNECTION_INIT })\r\n            );\r\n          } else {\r\n            dispatch({\r\n              type: WS_ORDER_HISTORY_GET_MESSAGE,\r\n              payload: [...restParsedData.orders].reverse(),\r\n            });\r\n          }\r\n        };\r\n        socket.onerror = (event) => {\r\n          dispatch({ type: WS_ORDER_HISTORY_CONNECTION_ERROR, payload: event });\r\n        };\r\n        socket.onclose = (event) => {\r\n          dispatch({\r\n            type: WS_ORDER_HISTORY_CONNECTION_CLOSED,\r\n            payload: event,\r\n          });\r\n        };\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};\r\n","import { setCookie, getCookie, deleteCookie } from \"../utils\";\r\nimport { WS_ORDER_HISTORY_CONNECTION_CLOSED } from \"./order-history-actions\";\r\nimport { AppDispatch, AppThunk } from \"../types\";\r\nconst axios = require(\"axios\");\r\n\r\nconst COOKIE_EXPIRE_SEC = 1200;\r\n\r\nconst registerUrl = \"https://norma.nomoreparties.space/api/auth/register\"; //- эндпоинт для регистрации пользователя.\r\nconst authorizationUrl = \"https://norma.nomoreparties.space/api/auth/login\"; //- эндпоинт для авторизации.\r\nconst logoutUrl = \"https://norma.nomoreparties.space/api/auth/logout\"; //- эндпоинт для выхода из системы.\r\nconst tokenRefreshUrl = \"https://norma.nomoreparties.space/api/auth/token\"; //- эндпоинт обновления токена.\r\nconst restorePasswordUrl =\r\n  \"https://norma.nomoreparties.space/api/password-reset\"; // - эндпоинт восстановления пароля.\r\nconst setNewPasswordUrl =\r\n  \"https://norma.nomoreparties.space/api/password-reset/reset\"; // - эндпоинт установки нового пароля пароля.\r\nconst userDataUrl = \"https://norma.nomoreparties.space/api/auth/user\"; // - эндпоинт получения данных о пользователе и обновления данных о пользователе.\r\n\r\nexport const SET_FORM_NAME: \"SET_FORM_NAME\" = \"SET_FORM_NAME\";\r\nexport const SET_FORM_EMAIL: \"SET_FORM_EMAIL\" = \"SET_FORM_EMAIL\";\r\nexport const SET_FORM_PASSWORD: \"SET_FORM_PASSWORD\" = \"SET_FORM_PASSWORD\";\r\nexport const SET_LOGIN: \"SET_LOGIN\" = \"SET_LOGIN\";\r\nexport const SET_ERROR: \"SET_ERROR\" = \"SET_ERROR\";\r\nexport const SET_REDIRECT_TO_MAIN: \"SET_REDIRECT_TO_MAIN\" =\r\n  \"SET_REDIRECT_TO_MAIN\";\r\nexport const UNSET_REDIRECT_TO_MAIN: \"UNSET_REDIRECT_TO_MAIN\" =\r\n  \"UNSET_REDIRECT_TO_MAIN\";\r\nexport const SET_LOGOUT: \"SET_LOGOUT\" = \"SET_LOGOUT\";\r\nexport const SET_REDIRECT_TO_RESET_PASSWORD: \"SET_REDIRECT_TO_RESET_PASSWORD\" =\r\n  \"SET_REDIRECT_TO_RESET_PASSWORD\";\r\nexport const UNSET_REDIRECT_TO_RESET_PASSWORD: \"UNSET_REDIRECT_TO_RESET_PASSWORD\" =\r\n  \"UNSET_REDIRECT_TO_RESET_PASSWORD\";\r\nexport const SET_REDIRECT_TO_LOGIN: \"SET_REDIRECT_TO_LOGIN\" =\r\n  \"SET_REDIRECT_TO_LOGIN\";\r\nexport const SET_CONFIRMATION_CODE: \"SET_CONFIRMATION_CODE\" =\r\n  \"SET_CONFIRMATION_CODE\";\r\nexport const UNSET_ERROR: \"UNSET_ERROR\" = \"UNSET_ERROR\";\r\nexport const UNSET_REDIRECT_TO_LOGIN: \"UNSET_REDIRECT_TO_LOGIN\" =\r\n  \"UNSET_REDIRECT_TO_LOGIN\";\r\nexport const SET_REDIRECT_TO_LOGIN_FOR_ORDER: \"SET_REDIRECT_TO_LOGIN_FOR_ORDER\" =\r\n  \"SET_REDIRECT_TO_LOGIN_FOR_ORDER\";\r\nexport const UNSET_REDIRECT_TO_LOGIN_FOR_ORDER: \"UNSET_REDIRECT_TO_LOGIN_FOR_ORDER\" =\r\n  \"UNSET_REDIRECT_TO_LOGIN_FOR_ORDER\";\r\nexport const SET_REDIRECT_TO_ORDER_DETAILS: \"SET_REDIRECT_TO_ORDER_DETAILS\" =\r\n  \"SET_REDIRECT_TO_ORDER_DETAILS\";\r\nexport const UNSET_REDIRECT_TO_ORDER_DETAILS: \"UNSET_REDIRECT_TO_ORDER_DETAILS\" =\r\n  \"UNSET_REDIRECT_TO_ORDER_DETAILS\";\r\n\r\nexport interface ISetFormNameAction {\r\n  readonly type: typeof SET_FORM_NAME;\r\n  formName: string;\r\n}\r\n\r\nexport interface ISetFormEmailAction {\r\n  readonly type: typeof SET_FORM_EMAIL;\r\n  formEmail: string;\r\n}\r\n\r\nexport interface ISetFormPasswordAction {\r\n  readonly type: typeof SET_FORM_PASSWORD;\r\n  formPassword: string;\r\n}\r\n\r\nexport interface ISetLoginAction {\r\n  readonly type: typeof SET_LOGIN;\r\n}\r\n\r\nexport interface ISetErrorAction {\r\n  readonly type: typeof SET_ERROR;\r\n  error: string;\r\n}\r\n\r\nexport interface ISetRedirectToMainAction {\r\n  readonly type: typeof SET_REDIRECT_TO_MAIN;\r\n}\r\n\r\nexport interface IUnsetRedirectToMainAction {\r\n  readonly type: typeof UNSET_REDIRECT_TO_MAIN;\r\n}\r\n\r\nexport interface ISetLogoutAction {\r\n  readonly type: typeof SET_LOGOUT;\r\n}\r\n\r\nexport interface ISetRedirectToResetPasswordAction {\r\n  readonly type: typeof SET_REDIRECT_TO_RESET_PASSWORD;\r\n}\r\n\r\nexport interface IUnsetRedirectToResetPasswordAction {\r\n  readonly type: typeof UNSET_REDIRECT_TO_RESET_PASSWORD;\r\n}\r\n\r\nexport interface ISetRedirectToLoginAction {\r\n  readonly type: typeof SET_REDIRECT_TO_LOGIN;\r\n}\r\n\r\nexport interface ISetConfirmationCodeAction {\r\n  readonly type: typeof SET_CONFIRMATION_CODE;\r\n  formConfirmationCode: string;\r\n}\r\n\r\nexport interface IUnsetErrorAction {\r\n  readonly type: typeof UNSET_ERROR;\r\n}\r\n\r\nexport interface IUnsetRedirectToLoginAction {\r\n  readonly type: typeof UNSET_REDIRECT_TO_LOGIN;\r\n}\r\n\r\nexport interface ISetRedirectToLoginForOrderAction {\r\n  readonly type: typeof SET_REDIRECT_TO_LOGIN_FOR_ORDER;\r\n}\r\n\r\nexport interface IUnsetRedirectToLoginForOrderAction {\r\n  readonly type: typeof UNSET_REDIRECT_TO_LOGIN_FOR_ORDER;\r\n}\r\n\r\nexport interface ISetRedirectToOrderDetailsAction {\r\n  readonly type: typeof SET_REDIRECT_TO_ORDER_DETAILS;\r\n}\r\n\r\nexport interface IUnsetRedirectToOrderDetailsAction {\r\n  readonly type: typeof UNSET_REDIRECT_TO_ORDER_DETAILS;\r\n}\r\n\r\nexport type TAuthorizationActions =\r\n  | ISetFormNameAction\r\n  | ISetFormEmailAction\r\n  | ISetFormPasswordAction\r\n  | ISetLoginAction\r\n  | ISetErrorAction\r\n  | ISetRedirectToMainAction\r\n  | IUnsetRedirectToMainAction\r\n  | ISetLogoutAction\r\n  | ISetRedirectToResetPasswordAction\r\n  | IUnsetRedirectToResetPasswordAction\r\n  | ISetRedirectToLoginAction\r\n  | ISetConfirmationCodeAction\r\n  | IUnsetErrorAction\r\n  | IUnsetRedirectToLoginAction\r\n  | ISetRedirectToLoginForOrderAction\r\n  | IUnsetRedirectToLoginForOrderAction\r\n  | ISetRedirectToOrderDetailsAction\r\n  | IUnsetRedirectToOrderDetailsAction;\r\n\r\nexport const refreshAccessToken = (dispatch: AppDispatch) => {\r\n  return axios\r\n    .post(tokenRefreshUrl, {\r\n      token: `${getCookie(\"refreshToken\")}`,\r\n    })\r\n    .then((data: any) => {\r\n      const accessToken = data.data.accessToken.split(\"Bearer \")[1];\r\n      const refreshToken = data.data.refreshToken;\r\n      setCookie(\"accessToken\", accessToken, { expires: COOKIE_EXPIRE_SEC });\r\n      setCookie(\"refreshToken\", refreshToken);\r\n    })\r\n    .catch((error: any) => catchError(dispatch, error));\r\n};\r\n\r\nconst setForm = (\r\n  dispatch: AppDispatch,\r\n  name = \"\",\r\n  email = \"\",\r\n  password = \"\"\r\n) => {\r\n  dispatch({\r\n    type: SET_FORM_NAME,\r\n    formName: name,\r\n  });\r\n  dispatch({\r\n    type: SET_FORM_EMAIL,\r\n    formEmail: email,\r\n  });\r\n  dispatch({\r\n    type: SET_FORM_PASSWORD,\r\n    formPassword: password,\r\n  });\r\n};\r\n\r\nconst catchError = (dispatch: AppDispatch, error: any) => {\r\n  const errorDescription = error.response?.data.message\r\n    ? error.response.data.message\r\n    : \"Ошибка операции\";\r\n  dispatch({\r\n    type: SET_ERROR,\r\n    error: errorDescription,\r\n  });\r\n};\r\n\r\nexport const register: AppThunk = (\r\n  email: string,\r\n  password: string,\r\n  name: string\r\n) => {\r\n  return function (dispatch: AppDispatch) {\r\n    axios\r\n      .post(registerUrl, {\r\n        email,\r\n        password,\r\n        name,\r\n      })\r\n      .then((data: any) => {\r\n        const accessToken = data.data.accessToken.split(\"Bearer \")[1];\r\n        const refreshToken = data.data.refreshToken;\r\n        setCookie(\"accessToken\", accessToken, { expires: COOKIE_EXPIRE_SEC });\r\n        setCookie(\"refreshToken\", refreshToken);\r\n        dispatch({ type: SET_REDIRECT_TO_MAIN });\r\n        dispatch({ type: UNSET_REDIRECT_TO_MAIN });\r\n      })\r\n      .catch((error: any) => catchError(dispatch, error))\r\n      .finally(() => setForm(dispatch));\r\n  };\r\n};\r\n\r\nexport const makeLogin: AppThunk = (email: string, password: string) => {\r\n  return function (dispatch: AppDispatch) {\r\n    axios\r\n      .post(authorizationUrl, {\r\n        email,\r\n        password,\r\n      })\r\n      .then((data: any) => {\r\n        const accessToken = data.data.accessToken.split(\"Bearer \")[1];\r\n        const refreshToken = data.data.refreshToken;\r\n        setCookie(\"accessToken\", accessToken, { expires: COOKIE_EXPIRE_SEC });\r\n        setCookie(\"refreshToken\", refreshToken);\r\n        dispatch({ type: SET_REDIRECT_TO_MAIN });\r\n        dispatch({\r\n          type: SET_LOGIN,\r\n        });\r\n        dispatch({ type: UNSET_REDIRECT_TO_MAIN });\r\n      })\r\n      .catch((error: any) => catchError(dispatch, error))\r\n      .finally(() => setForm(dispatch));\r\n  };\r\n};\r\n\r\nexport const makeLogout: AppThunk = () => {\r\n  return function (dispatch: AppDispatch) {\r\n    axios\r\n      .post(logoutUrl, {\r\n        token: `${getCookie(\"refreshToken\")}`,\r\n      })\r\n      .then(() => {\r\n        dispatch({ type: SET_REDIRECT_TO_LOGIN });\r\n        deleteCookie(\"refreshToken\");\r\n        deleteCookie(\"accessToken\");\r\n        dispatch({ type: SET_LOGOUT });\r\n        dispatch({ type: WS_ORDER_HISTORY_CONNECTION_CLOSED });\r\n      })\r\n      .catch((error: any) => catchError(dispatch, error));\r\n  };\r\n};\r\n\r\nexport const restorePassword: AppThunk = (email: string) => {\r\n  return function (dispatch: AppDispatch) {\r\n    axios\r\n      .post(restorePasswordUrl, {\r\n        email,\r\n      })\r\n      .then(() => {\r\n        dispatch({ type: SET_REDIRECT_TO_RESET_PASSWORD });\r\n      })\r\n      .catch((error: any) => catchError(dispatch, error));\r\n  };\r\n};\r\n\r\nexport const setNewPassword: AppThunk = (password: string, token: string) => {\r\n  return function (dispatch: AppDispatch) {\r\n    axios\r\n      .post(setNewPasswordUrl, {\r\n        password,\r\n        token,\r\n      })\r\n      .then(() => {\r\n        dispatch({ type: SET_REDIRECT_TO_LOGIN });\r\n        dispatch({ type: SET_LOGOUT });\r\n      })\r\n      .catch((error: any) => catchError(dispatch, error));\r\n  };\r\n};\r\n\r\nexport const getUserData: AppThunk = () => {\r\n  return async function (dispatch: AppDispatch) {\r\n    if (getCookie(\"accessToken\")) {\r\n      axios\r\n        .get(userDataUrl, {\r\n          headers: {\r\n            authorization: `Bearer ${getCookie(\"accessToken\")}`,\r\n          },\r\n        })\r\n        .then((data: any) => {\r\n          setForm(\r\n            dispatch,\r\n            data.data.user.name,\r\n            data.data.user.email,\r\n            \"********\"\r\n          );\r\n          dispatch({ type: SET_LOGIN });\r\n        })\r\n        .catch((error: any) => {\r\n          if (error.response?.data.message === \"Token is invalid\") {\r\n            refreshAccessToken(dispatch);\r\n            getUserData();\r\n          } else {\r\n            catchError(dispatch, error);\r\n          }\r\n        });\r\n    } else {\r\n      if (getCookie(\"refreshToken\")) {\r\n        refreshAccessToken(dispatch);\r\n        getUserData();\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nexport const changeUserData: AppThunk = (\r\n  email: string,\r\n  password: string,\r\n  name: string\r\n) => {\r\n  return async function (dispatch: AppDispatch) {\r\n    axios\r\n      .patch(\r\n        userDataUrl,\r\n        {\r\n          email,\r\n          password,\r\n          name,\r\n        },\r\n        {\r\n          headers: {\r\n            authorization: `Bearer ${getCookie(\"accessToken\")}`,\r\n          },\r\n        }\r\n      )\r\n      .then((data: any) => {\r\n        setForm(\r\n          dispatch,\r\n          data.data.user.name,\r\n          data.data.user.email,\r\n          \"********\"\r\n        );\r\n        dispatch({ type: SET_LOGIN });\r\n      })\r\n      .catch((error: any) => {\r\n        if (error.response.data.message === \"jwt expired\") {\r\n          refreshAccessToken(dispatch);\r\n          getUserData();\r\n        } else {\r\n          catchError(dispatch, error);\r\n        }\r\n      });\r\n  };\r\n};\r\n","export const BASE_URL = \"https://norma.nomoreparties.space/api\";\r\n\r\n// const url = `${BASE_URL}/ingredients`;\r\n\r\n// export function getIngredients (setData, setError) {\r\n// return fetch(url)\r\n// .then((response) => {\r\n//   if (response.ok) {\r\n//     return response.json();\r\n//   }\r\n//   return Promise.reject(`Ошибка: ${response.status}`);\r\n// })\r\n// .then((data) => {\r\n//   setData(data.data);\r\n// })\r\n// .catch((error) => setError(`${error}`));\r\n// }","import {\r\n  SET_REDIRECT_TO_LOGIN_FOR_ORDER,\r\n  UNSET_REDIRECT_TO_LOGIN_FOR_ORDER,\r\n  refreshAccessToken,\r\n  SET_REDIRECT_TO_ORDER_DETAILS,\r\n  UNSET_REDIRECT_TO_ORDER_DETAILS,\r\n} from \"./authorization-actions\";\r\nimport { getCookie } from \"../utils\";\r\nimport { TData, AppThunk, AppDispatch } from \"../types\";\r\nimport {BASE_URL} from \"../../utils/burger-api\";\r\nconst axios = require(\"axios\");\r\nconst getDataUrl: string = `${BASE_URL}/ingredients`;\r\nconst postOrderUrl: string = `${BASE_URL}/orders`;\r\n\r\nexport const SET_DATA: \"SET_DATA\" = \"SET_DATA\";\r\nexport const SET_MAIN_ERROR: \"SET_MAIN_ERROR\" = \"SET_MAIN_ERROR\";\r\nexport const SET_ORDER_NUMBER: \"SET_ORDER_NUMBER\" = \"SET_ORDER_NUMBER\";\r\nexport const DELETE_INGREDIENT_FROM_INGREDIENTS: \"DELETE_INGREDIENT_FROM_INGREDIENTS\" =\r\n  \"DELETE_INGREDIENT_FROM_INGREDIENTS\";\r\nexport const REPLACE_INNER_DRAG_INGREDIENT: \"REPLACE_INNER_DRAG_INGREDIENT\" =\r\n  \"REPLACE_INNER_DRAG_INGREDIENT\";\r\nexport const SET_ADDED_INGREDIENT: \"SET_ADDED_INGREDIENT\" =\r\n  \"SET_ADDED_INGREDIENT\";\r\n\r\nexport interface ISetDataAction {\r\n  readonly type: typeof SET_DATA;\r\n  data: Array<TData>;\r\n}\r\n\r\nexport interface ISetMainErrorAction {\r\n  readonly type: typeof SET_MAIN_ERROR;\r\n  error: string;\r\n}\r\n\r\nexport interface ISetOrderNumberAction {\r\n  readonly type: typeof SET_ORDER_NUMBER;\r\n  orderNumber: string | number;\r\n}\r\n\r\nexport interface IDeleteIngredientFromIngredientsAction {\r\n  readonly type: typeof DELETE_INGREDIENT_FROM_INGREDIENTS;\r\n  key: string | number;\r\n}\r\n\r\nexport interface IReplaceInnerDragIngredientAction {\r\n  readonly type: typeof REPLACE_INNER_DRAG_INGREDIENT;\r\n  dragIndex: number;\r\n  hoverIndex: number;\r\n}\r\n\r\nexport interface ISetAddedIngredientAction {\r\n  readonly type: typeof SET_ADDED_INGREDIENT;\r\n  ingredient: TData;\r\n}\r\n\r\nexport type TAppActions =\r\n  | ISetDataAction\r\n  | ISetMainErrorAction\r\n  | ISetOrderNumberAction\r\n  | IDeleteIngredientFromIngredientsAction\r\n  | IReplaceInnerDragIngredientAction\r\n  | ISetAddedIngredientAction;\r\n\r\nexport const getData: AppThunk = () => {\r\n  return function (dispatch: AppDispatch) {\r\n    return axios\r\n      .get(getDataUrl)\r\n      .then((data: any) => {\r\n        dispatch({ type: SET_DATA, data: data.data.data });\r\n      })\r\n      .catch((error: any) =>\r\n        dispatch({ type: SET_MAIN_ERROR, error: `${error}` })\r\n      );\r\n  };\r\n};\r\n\r\nexport const getOrder: AppThunk = (ingredients: Array<TData>, bun: TData) => {\r\n  return async function (dispatch: AppDispatch) {\r\n    if (!getCookie(\"refreshToken\")) {\r\n      await dispatch({ type: SET_REDIRECT_TO_LOGIN_FOR_ORDER });\r\n      await dispatch({ type: UNSET_REDIRECT_TO_LOGIN_FOR_ORDER });\r\n    } else {\r\n      if (!getCookie(\"accessToken\")) {\r\n        await refreshAccessToken(dispatch);\r\n      }\r\n      const ingredientsId = ingredients.map((el) => el._id);\r\n      const orderInfo = [bun._id, ...ingredientsId, bun._id];\r\n      axios\r\n        .post(\r\n          postOrderUrl,\r\n          {\r\n            ingredients: orderInfo,\r\n          },\r\n          {\r\n            headers: {\r\n              authorization: `Bearer ${getCookie(\"accessToken\")}`,\r\n            },\r\n          }\r\n        )\r\n        .then((data: any) => {\r\n          dispatch({\r\n            type: SET_ORDER_NUMBER,\r\n            orderNumber: data.data.order.number,\r\n          });\r\n        })\r\n        .then(() => {\r\n          dispatch({ type: SET_REDIRECT_TO_ORDER_DETAILS });\r\n          dispatch({ type: UNSET_REDIRECT_TO_ORDER_DETAILS });\r\n        })\r\n        .catch((error: any) =>\r\n          dispatch({ type: SET_MAIN_ERROR, error: `${error}` })\r\n        );\r\n    }\r\n  };\r\n};\r\n","import { FC, ReactNode } from \"react\";\r\n// import { useSelector } from \"react-redux\";\r\nimport { Route, Redirect, useLocation } from \"react-router-dom\";\r\n// import {RootState} from \"../../services/reducers/rootReducer\";\r\nimport {getCookie} from \"../../services/utils\"\r\n\r\nconst ProtectedRoute: FC<{\r\n  children: ReactNode;\r\n  path: string;\r\n  onlyUnAuth: boolean;\r\n  exact: boolean;\r\n}>  = ({ onlyUnAuth, children, ...rest}) => {\r\n  // const authorized = useSelector(\r\n  //   (store: RootState) => store.authorizationReducer.authorized\r\n  // );\r\n  const isAuthorized = getCookie(\"accessToken\");\r\n  const location  = useLocation();\r\n\r\n  // return (\r\n  //   <Route\r\n  //     path={path}\r\n  //     exact={true}\r\n  //     render={() => {\r\n  //       if (authorized && onlyUnAuth) {\r\n  //         return children;\r\n  //       }\r\n  //       if (!authorized && onlyUnAuth) {\r\n  //         return  <Redirect to={{ pathname: \"/login\", state: { from: location } }} />;\r\n  //         // return <Redirect to=\"/login\" />;\r\n  //       }\r\n  //       if (!authorized && !onlyUnAuth) {\r\n  //         return children;\r\n  //       }\r\n  //       if (authorized && !onlyUnAuth) {\r\n  //         return <Redirect to=\"/\" />;\r\n  //       }\r\n  //     }}\r\n  //   />\r\n  // );\r\n  if (!onlyUnAuth && isAuthorized) {\r\n    const { from } = location.state as any || { from: { pathname: \"/\" } };\r\n    return (\r\n      <Route {...rest}>\r\n        <Redirect to={from} />\r\n      </Route>\r\n    );\r\n  }\r\n\r\n  if (onlyUnAuth && !isAuthorized) {\r\n    return (\r\n      <Route {...rest}>\r\n        <Redirect to={{ pathname: \"/login\", state: { from: location } }} />\r\n      </Route>\r\n    );\r\n  }\r\n\r\n  return <Route {...rest}>{children}</Route>;\r\n\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import {FC} from \"react\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport {\r\n  CurrencyIcon,\r\n  Counter,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n// import PropTypes from \"prop-types\";\r\nimport styles from \"./BurgerIngredients.module.css\";\r\nimport { TIngredient } from \"../../services/types\";\r\n\r\nconst Ingredient: FC<TIngredient> = (props) => {\r\n  const { data, counter } = props;\r\n\r\n  const [{ isDrag }, dragRef] = useDrag({\r\n    type: \"ingredient\",\r\n    item: data,\r\n    collect: (monitor) => ({\r\n      isDrag: monitor.isDragging(),\r\n    }),\r\n  });\r\n  const dragStyle = isDrag ? { opacity: \"0.1\" } : { opacity: \"1\" };\r\n  return (\r\n    <div ref={dragRef} style={dragStyle}>\r\n      <div>\r\n        <div className={`${styles.ingredient} pl-4 pr-4`}>\r\n          <img src={data.image} alt={data.name} />\r\n          <div className={`${styles.ingredientPrice} mt-1 mb-1`}>\r\n            <p className=\"text text_type_digits-default mr-1\">{data.price}</p>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n        </div>\r\n        <p\r\n          className={`text text_type_main-default pb-6 mt-1 ${styles.ingredientName}`}\r\n        >\r\n          {data.name}\r\n        </p>\r\n        {counter && <Counter count={counter} size=\"default\" />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Ingredient;\r\n","export const SET_CURRENT_BURGER_INGREDIENTS_NAME: \"SET_CURRENT_BURGER_INGREDIENTS_NAME\" =\r\n  \"SET_CURRENT_BURGER_INGREDIENTS_NAME\";\r\n\r\nexport interface IInterfaceAction {\r\n  readonly type: typeof SET_CURRENT_BURGER_INGREDIENTS_NAME;\r\n  ingredientsName: string;\r\n}\r\n\r\nexport type TInterfaceAction = IInterfaceAction;\r\n","import React, { FC } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport Ingredient from \"./Ingredient\";\r\nimport styles from \"./BurgerIngredients.module.css\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\nimport { SET_CURRENT_BURGER_INGREDIENTS_NAME } from \"../../services/actions/interface-actions\";\r\n\r\nconst BurgerIngredients: FC = () => {\r\n  const { data, bun, ingredients } = useSelector((store: RootState) => store.appReducer);\r\n  const currentBurgerIngredientsName = useSelector(\r\n    (store: RootState) => store.interfaceReducer.currentBurgerIngredientsName\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  let location = useLocation();\r\n\r\n  const handleScroll = (e: React.UIEvent<HTMLElement>) => {\r\n    if ((e.target as HTMLElement).scrollTop < 140) {\r\n      dispatch({\r\n        type: SET_CURRENT_BURGER_INGREDIENTS_NAME,\r\n        ingredientsName: \"Булки\",\r\n      });\r\n    } else if ((e.target as HTMLElement).scrollTop < 560 && (e.target as HTMLElement).scrollTop > 140) {\r\n      dispatch({\r\n        type: SET_CURRENT_BURGER_INGREDIENTS_NAME,\r\n        ingredientsName: \"Соусы\",\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: SET_CURRENT_BURGER_INGREDIENTS_NAME,\r\n        ingredientsName: \"Начинки\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className={`${styles.burgerIngredients} mr-10`}>\r\n      <h1 className=\"text text_type_main-large mt-10\">Соберите бургер</h1>\r\n      <div style={{ display: \"flex\" }}>\r\n        <a href=\"#bun\">\r\n          <Tab\r\n            value=\"Булки\"\r\n            active={currentBurgerIngredientsName === \"Булки\"}\r\n            onClick={() =>\r\n              dispatch({\r\n                type: SET_CURRENT_BURGER_INGREDIENTS_NAME,\r\n                ingredientsName: \"Булки\",\r\n              })\r\n            }\r\n          >\r\n            Булки\r\n          </Tab>\r\n        </a>\r\n        <a href=\"#sauce\">\r\n          <Tab\r\n            value=\"Соусы\"\r\n            active={currentBurgerIngredientsName === \"Соусы\"}\r\n            onClick={() =>\r\n              dispatch({\r\n                type: SET_CURRENT_BURGER_INGREDIENTS_NAME,\r\n                ingredientsName: \"Соусы\",\r\n              })\r\n            }\r\n          >\r\n            Соусы\r\n          </Tab>\r\n        </a>\r\n        <a href=\"#main\">\r\n          <Tab\r\n            value=\"Начинки\"\r\n            active={currentBurgerIngredientsName === \"Начинки\"}\r\n            onClick={() =>\r\n              dispatch({\r\n                type: SET_CURRENT_BURGER_INGREDIENTS_NAME,\r\n                ingredientsName: \"Начинки\",\r\n              })\r\n            }\r\n          >\r\n            Начинки\r\n          </Tab>\r\n        </a>\r\n      </div>\r\n      <div className={`mt-10 ${styles.scrollbar}`} onScroll={handleScroll}>\r\n        <div>\r\n          <h2 className=\"text text_type_main-medium\" id=\"bun\">\r\n            Булки\r\n          </h2>\r\n          <div className={`mr-4 ml-4 ${styles.burgerIngredientsContainer}`}>\r\n            {[...data].map((el) => {\r\n              if (el.type !== \"bun\") {\r\n                return null;\r\n              }\r\n              return (\r\n                <Link\r\n                  to={{\r\n                    pathname: `/ingredients/${el._id}`,\r\n                    state: { background: location },\r\n                  }}\r\n                  className={`${styles.ingredientContainer} pl-4 pr-4`}\r\n                  key={el._id}\r\n                >\r\n                  <Ingredient\r\n                    data={el}\r\n                    counter={bun && bun._id === el._id ? 1 : null}\r\n                  />\r\n                </Link>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <h2 className=\"text text_type_main-medium\" id=\"sauce\">\r\n            Соусы\r\n          </h2>\r\n          <div\r\n            className={`mt-6 mb-10 mr-4 ml-4 ${styles.burgerIngredientsContainer}`}\r\n          >\r\n            {[...data].map((el) => {\r\n              if (el.type !== \"sauce\") {\r\n                return null;\r\n              }\r\n              let counter: number | null = [...ingredients].filter(\r\n                (element) => el._id === element._id\r\n              ).length;\r\n              counter = counter === 0 ? null : counter;\r\n              return (\r\n                <Link\r\n                  to={{\r\n                    pathname: `/ingredients/${el._id}`,\r\n                    state: { background: location },\r\n                  }}\r\n                  className={`${styles.ingredientContainer} pl-4 pr-4`}\r\n                  key={el._id}\r\n                >\r\n                  <Ingredient data={el} counter={counter} />\r\n                </Link>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <h2 className=\"text text_type_main-medium\" id=\"main\">\r\n            Начинки\r\n          </h2>\r\n          <div\r\n            className={`mt-6 mb-10 mr-4 ml-4 ${styles.burgerIngredientsContainer}`}\r\n          >\r\n            {[...data].map((el) => {\r\n              if (el.type !== \"main\") {\r\n                return null;\r\n              }\r\n              let counter: number | null =[...ingredients].filter(\r\n                (element) => el._id === element._id\r\n              ).length;\r\n              counter = counter === 0 ? null : counter;\r\n              return (\r\n                <Link\r\n                  to={{\r\n                    pathname: `/ingredients/${el._id}`,\r\n                    state: { background: location },\r\n                  }}\r\n                  className={`${styles.ingredientContainer} pl-4 pr-4`}\r\n                  key={el._id}\r\n                >\r\n                  <Ingredient data={el} counter={counter} />\r\n                </Link>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredients;\r\n","import React, {FC, useRef } from \"react\";\r\nimport {\r\n  ConstructorElement,\r\n  DragIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDrop, useDrag } from \"react-dnd\";\r\nimport styles from \"./BurgerConstructor.module.css\";\r\nimport {\r\n  DELETE_INGREDIENT_FROM_INGREDIENTS,\r\n  REPLACE_INNER_DRAG_INGREDIENT,\r\n} from \"../../services/actions/app-actions\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { TBurgerConstructorInnerIngredients } from \"../../services/types\";\r\n\r\nconst BurgerConstructorInnerIngredients: FC<TBurgerConstructorInnerIngredients> = ({ el, index }) => {\r\n  const ref = useRef<HTMLDivElement | null>(null);\r\n  const dispatch = useDispatch();\r\n  \r\n  const [, dropInner] = useDrop({\r\n    accept: \"innerIngredient\",\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n    }),\r\n    hover(item: any, monitor: any) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex = item.index;\r\n      const hoverIndex = index;\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      const clientOffset = monitor.getClientOffset();\r\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n      dispatch({ type: REPLACE_INNER_DRAG_INGREDIENT, dragIndex, hoverIndex });\r\n      monitor.getItem().index = hoverIndex;\r\n    },\r\n  });\r\n\r\n  const [{ isDragging }, dragInner] = useDrag({\r\n    type: \"innerIngredient\",\r\n    item: () => {\r\n      return { el, index };\r\n    },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const dragElStyle = isDragging ? { opacity: \"0\" } : { opacity: \"1\" };\r\n\r\n  dragInner(dropInner(ref));\r\n\r\n  return (\r\n    <div\r\n      className={`mb-4 ${styles.mainIngredients}`}\r\n      ref={ref}\r\n      style={dragElStyle}\r\n    >\r\n      <div className=\"mr-2\">\r\n        <DragIcon type=\"primary\" />\r\n      </div>\r\n      <ConstructorElement\r\n        text={el.name}\r\n        price={el.price}\r\n        thumbnail={el.image}\r\n        handleClose={() =>\r\n          dispatch({\r\n            type: DELETE_INGREDIENT_FROM_INGREDIENTS,\r\n            key: el.key,\r\n          })\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default BurgerConstructorInnerIngredients;\r\n","import React, { FC } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect, useLocation } from \"react-router-dom\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport {\r\n  ConstructorElement,\r\n  CurrencyIcon,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { getOrder } from \"../../services/actions/app-actions\";\r\nimport styles from \"./BurgerConstructor.module.css\";\r\nimport { SET_ADDED_INGREDIENT } from \"../../services/actions/app-actions\";\r\nimport { TData } from \"../../services/types\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\n// import { CLOSE_MODAL_ORDER_DETAILS} from \"../../services/actions/interface-actions\"\r\nimport BurgerConstructorInnerIngredients from \"./BurgerConstructorIngredients\";\r\n\r\nconst BurgerConstructor: FC = () => {\r\n\r\n  const { bun, ingredients } = useSelector((store: RootState) => store.appReducer);\r\n  const { redirectToLoginForOrder, redirectToOrderDetails } = useSelector(\r\n    (store: RootState) => store.authorizationReducer\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  let location = useLocation();\r\n\r\n  const bunTotalPrice = bun ? bun.price * 2 : 0;\r\n  const ingredientsTotalPrice = [...ingredients].reduce(\r\n    (acc: number, el: TData) => (acc += el.price),\r\n    0\r\n  );\r\n  const totalPrice = bunTotalPrice + ingredientsTotalPrice;\r\n\r\n  const [{ isDragContainer }, dropTarget] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop(element) {\r\n      dispatch({ type: SET_ADDED_INGREDIENT, ingredient: element });\r\n    },\r\n    collect: (monitor) => ({\r\n      isDragContainer: monitor.canDrop(),\r\n    }),\r\n  });\r\n\r\n  const burgerConstructorIngredientPlaceStyle = isDragContainer\r\n    ? { border: \"1px solid lightgreen\" }\r\n    : { border: \"0\" };\r\n\r\n  return (\r\n    <section className={styles.burgerConstructor}>\r\n      <div\r\n        className={`mt-25 mb-10 ml-4 ${styles.burgerConstructorIngredientPlace}`}\r\n        ref={dropTarget}\r\n        style={burgerConstructorIngredientPlaceStyle}\r\n        data-test=\"dropTarget\"\r\n      >\r\n        {bun && (\r\n          <div className=\"ml-8 mb-4\" data-test=\"bunUpContainer\">\r\n            <ConstructorElement\r\n              type=\"top\"\r\n              isLocked\r\n              text={`${bun.name} (верх)`}\r\n              price={bun.price}\r\n              thumbnail={bun.image}\r\n            />\r\n          </div>\r\n        )}\r\n        {\r\n          <div className={`pr-2 ${styles.scrollbar}`} data-test=\"ingredientsScrollbarContainer\">\r\n            {ingredients.map((el: TData, index: number) => (\r\n              <BurgerConstructorInnerIngredients\r\n                el={el}\r\n                index={index}\r\n                key={el.key}\r\n              />\r\n            ))}\r\n          </div>\r\n        }\r\n        {bun && (\r\n          <div className=\"ml-8\" data-test=\"bunDownContainer\">\r\n            <ConstructorElement\r\n              type=\"bottom\"\r\n              isLocked\r\n              text={`${bun.name} (низ)`}\r\n              price={bun.price}\r\n              thumbnail={bun.image}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className={`${styles.orderContainer} mr-4`}>\r\n        <div className={`${styles.totalPriceContainer} mr-10`}>\r\n          <p className=\"text text_type_digits-medium mr-2\">{totalPrice}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"large\"\r\n          htmlType=\"button\"\r\n          onClick={async () => {\r\n            bun && ingredients && dispatch(getOrder(ingredients, bun));\r\n          }}\r\n        >\r\n          Оформить заказ\r\n        </Button>\r\n      </div>\r\n      {redirectToLoginForOrder && <Redirect to=\"/login\" />}\r\n      {redirectToOrderDetails && (\r\n        <Redirect\r\n          to={{\r\n            pathname: \"/order-details\",\r\n            state: { background: location },\r\n          }}\r\n        />\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BurgerConstructor;\r\n","import { FC } from \"react\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport BurgerIngredients from \"../../components/BurgerIngredients/BurgerIngredients\";\r\nimport BurgerConstructor from \"../../components/BurgerConstructor/BurgerConstructor\";\r\nimport styles from \"./home.module.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\n\r\nexport const HomePage: FC = () => {\r\n  const { data, error } = useSelector((store: RootState) => store.appReducer);\r\n    \r\n  return (\r\n    <>\r\n      {error && (\r\n        <h2 className={`${styles.main} text text_type_main-medium`}>\r\n          {error}. Перезагрузите страницу\r\n        </h2>\r\n      )}\r\n      <main className={styles.main}>\r\n        {data && (\r\n          <div className={styles.container}>\r\n            <DndProvider backend={HTML5Backend}>\r\n              <BurgerIngredients />\r\n              <BurgerConstructor />\r\n            </DndProvider>\r\n          </div>\r\n        )}\r\n      </main>      \r\n    </>\r\n  );\r\n}\r\n","import { Logo } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC, ReactNode } from \"react\";\r\nimport styles from \"./AuthenticationForm.module.css\"\r\n\r\nconst AuthenticationForm: FC<{ children: ReactNode }> = ({ children }) => (\r\n  <div className={`${styles.container} ${styles.flexColumnCenter}`}>\r\n    <Logo />\r\n    { children }\r\n  </div>\r\n);\r\n\r\nexport default AuthenticationForm;","import {\r\n  EmailInput,\r\n  PasswordInput,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  SET_FORM_EMAIL,\r\n  SET_FORM_PASSWORD,\r\n  UNSET_ERROR,\r\n  makeLogin\r\n} from \"../../services/actions/authorization-actions\";\r\nimport styles from \"./LoginForm.module.css\";\r\nimport { FC, useEffect } from \"react\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\n\r\n\r\nconst LoginForm: FC = () => {\r\n  const { formEmail, formPassword, error, redirectToMain } = useSelector(\r\n    (store: RootState) => store.authorizationReducer\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch({ type: UNSET_ERROR })\r\n    }\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <>\r\n      <h2 className=\"mt-20 mb-6 text text_type_main-medium\">Вход</h2>\r\n      {error && <h2 className=\"mb-6 text text_type_main-medium\" style={{textAlign: \"center\"}}>{error}</h2>}\r\n      <form className={`${styles.flexColumnCenter} mb-20`} onSubmit={(e) => {\r\n            e.preventDefault();\r\n            dispatch(makeLogin(formEmail, formPassword));\r\n          }}>\r\n        <div className=\"mb-6\">\r\n          <EmailInput\r\n            name={\"email\"}\r\n            value={formEmail}\r\n            onChange={(e) =>\r\n              dispatch({\r\n                type: SET_FORM_EMAIL,\r\n                formEmail: e.target.value,\r\n              })\r\n            }\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <PasswordInput\r\n            name={\"password\"}\r\n            value={formPassword}\r\n            onChange={(e) =>\r\n              dispatch({\r\n                type: SET_FORM_PASSWORD,\r\n                formPassword: e.target.value,\r\n              })\r\n            }\r\n          />\r\n        </div>\r\n        <Button type=\"primary\" htmlType=\"submit\" size=\"medium\" >\r\n          Войти\r\n        </Button>\r\n      </form>\r\n      <div>\r\n        <div className={styles.displayFlex}>\r\n          <p className={`${styles.text} text text_type_main-default`}>\r\n            Вы — новый пользователь?\r\n          </p>\r\n          <Link to=\"/register\">\r\n            <p className={`${styles.link} text text_type_main-default`}>\r\n              Зарегистрироваться\r\n            </p>\r\n          </Link>\r\n        </div>\r\n        <div className={styles.displayFlex}>\r\n          <p className={`${styles.text} text text_type_main-default`}>\r\n            Забыли пароль?\r\n          </p>\r\n          <Link to=\"/forgot-password\">\r\n            <p className={`${styles.link} text text_type_main-default`}>\r\n              Восстановить пароль\r\n            </p>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      {redirectToMain && <Redirect to=\"/\" />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n","import { FC } from \"react\";\r\nimport AuthenticationForm from \"../../components/AuthenticationForm/AuthenticationForm\";\r\nimport LoginForm from \"../../components/LoginForm/LoginForm\";\r\n\r\nexport const LoginPage: FC = () => (\r\n  <>\r\n    <AuthenticationForm>\r\n      <LoginForm />\r\n    </AuthenticationForm>\r\n  </>\r\n);\r\n","import { FC, useEffect } from \"react\";\r\nimport {\r\n  EmailInput,\r\n  PasswordInput,\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  SET_FORM_NAME,\r\n  SET_FORM_EMAIL,\r\n  SET_FORM_PASSWORD,\r\n  UNSET_ERROR,\r\n  register,\r\n} from \"../../services/actions/authorization-actions\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\nimport styles from \"./RegisterForm.module.css\";\r\n\r\nconst RegisterForm: FC = () => {\r\n  const { formName, formEmail, formPassword, error, redirectToMain } = useSelector(\r\n    (store: RootState) => store.authorizationReducer\r\n  );\r\n  const dispatch = useDispatch();\r\n  \r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch({ type: UNSET_ERROR })\r\n    }\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <>\r\n      <h2 className=\"mt-20 mb-6 text text_type_main-medium\">Регистрация</h2>\r\n      {error && <h2 className=\"mb-6 text text_type_main-medium\" style={{textAlign: \"center\"}}>{error}</h2>}\r\n      <form className={`${styles.flexColumnCenter} mb-20`}>\r\n        <div className=\"mb-6\">\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Имя\"}\r\n            value={formName}\r\n            onChange={(e) =>\r\n              dispatch({\r\n                type: SET_FORM_NAME,\r\n                formName: e.target.value,\r\n              })\r\n            }\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <EmailInput\r\n            name={\"email\"}\r\n            value={formEmail}\r\n            onChange={(e) =>\r\n              dispatch({\r\n                type: SET_FORM_EMAIL,\r\n                formEmail: e.target.value,\r\n              })\r\n            }\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <PasswordInput\r\n            name={\"password\"}\r\n            value={formPassword}\r\n            onChange={(e) =>\r\n              dispatch({\r\n                type: SET_FORM_PASSWORD,\r\n                formPassword: e.target.value,\r\n              })\r\n            }\r\n          />\r\n        </div>\r\n        <Button\r\n          type=\"primary\"\r\n          htmlType=\"button\"\r\n          size=\"medium\"\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            dispatch(register(formEmail, formPassword, formName));\r\n          }}\r\n        >\r\n          Зарегистрироваться\r\n        </Button>\r\n      </form>\r\n      <div>\r\n        <div className={styles.displayFlex}>\r\n          <p className={`${styles.text} text text_type_main-default`}>\r\n            Уже зарегистрированы?\r\n          </p>\r\n          <Link to=\"/login\">\r\n            <p className={`${styles.link} text text_type_main-default`}>\r\n              Войти\r\n            </p>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      {redirectToMain && <Redirect to=\"/\" />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RegisterForm;\r\n","import { FC } from \"react\";\r\nimport AuthenticationForm from \"../../components/AuthenticationForm/AuthenticationForm\";\r\nimport RegisterForm from \"../../components/RegisterForm/RegisterForm\"\r\n\r\nexport const RegisterPage: FC = () => (\r\n  <>\r\n    <AuthenticationForm>\r\n      <RegisterForm />\r\n    </AuthenticationForm>\r\n  </>\r\n);","import {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport styles from \"./ForgotPasswordForm.module.css\";\r\nimport {\r\n  SET_FORM_EMAIL,\r\n  restorePassword,\r\n  UNSET_ERROR,\r\n} from \"../../services/actions/authorization-actions\";\r\nimport {FC, useEffect } from \"react\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\n\r\nconst ForgotPasswordForm: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { formEmail, error, redirectToResetPassword } = useSelector(\r\n    (store: RootState) => store.authorizationReducer\r\n  );\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch({ type: UNSET_ERROR });\r\n    };\r\n  }, [dispatch]);\r\n  return (\r\n    <>\r\n      <h2 className=\"mt-20 mb-6 text text_type_main-medium\">\r\n        Восстановление пароля\r\n      </h2>\r\n      {error && (\r\n        <h2\r\n          className=\"mb-6 text text_type_main-medium\"\r\n          style={{ textAlign: \"center\" }}\r\n        >\r\n          {error}\r\n        </h2>\r\n      )}\r\n      <form className={`${styles.flexColumnCenter} mb-20`} onSubmit={(e) => {\r\n            e.preventDefault();\r\n            dispatch(restorePassword(formEmail));\r\n          }}>\r\n        <div className=\"mb-6\">\r\n          <Input\r\n            type={\"email\"}\r\n            placeholder={\"Укажите e-mail\"}\r\n            value={formEmail}\r\n            onChange={(e) =>\r\n              dispatch({\r\n                type: SET_FORM_EMAIL,\r\n                formEmail: e.target.value,\r\n              })\r\n            }\r\n          />\r\n        </div>\r\n        <Button\r\n          type=\"primary\"\r\n          htmlType=\"submit\"\r\n          size=\"medium\"\r\n        >\r\n          Восстановить\r\n        </Button>\r\n      </form>\r\n      <div>\r\n        <div className={styles.displayFlex}>\r\n          <p className={`${styles.text} text text_type_main-default`}>\r\n            Вспомнили пароль?\r\n          </p>\r\n          <Link to=\"/login\">\r\n            <p className={`${styles.link} text text_type_main-default`}>\r\n              Войти\r\n            </p>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      {redirectToResetPassword && (\r\n        <Redirect\r\n          to={{\r\n            pathname: \"/reset-password\",\r\n            state: 'forgot-password',\r\n          }}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ForgotPasswordForm;\r\n","import { FC } from \"react\";\r\nimport AuthenticationForm from \"../../components/AuthenticationForm/AuthenticationForm\";\r\nimport ForgotPasswordForm from \"../../components/ForgotPasswordForm/ForgotPasswordForm\";\r\n\r\nexport const ForgotPasswordPage: FC = () => {\r\n  return (\r\n    <>\r\n      <AuthenticationForm>\r\n        <ForgotPasswordForm />\r\n      </AuthenticationForm>\r\n    </>\r\n  );\r\n};\r\n","import {FC, useRef, useEffect, useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport styles from \"./ResetPasswordForm.module.css\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\nimport {\r\n  SET_FORM_PASSWORD,\r\n  SET_CONFIRMATION_CODE,\r\n  UNSET_ERROR,\r\n  setNewPassword,\r\n} from \"../../services/actions/authorization-actions\";\r\n\r\nconst ResetPasswordForm: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { formPassword, formConfirmationCode, error, redirectToLogin } =\r\n    useSelector((store: RootState) => store.authorizationReducer);\r\n  const [isPasswordShow, setPasswordShow] = useState(false);\r\n  const inputRef = useRef<HTMLInputElement | null>(null);\r\n  const onIconClick = () => {\r\n    inputRef.current?.focus();\r\n    setPasswordShow(!isPasswordShow);\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch({ type: UNSET_ERROR })\r\n    }\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <>\r\n      <h2 className=\"mt-20 mb-6 text text_type_main-medium\">\r\n        Восстановление пароля\r\n      </h2>\r\n      {error && (\r\n        <h2\r\n          className=\"mb-6 text text_type_main-medium\"\r\n          style={{ textAlign: \"center\" }}\r\n        >\r\n          {error}\r\n        </h2>\r\n      )}\r\n      <form className={`${styles.flexColumnCenter} mb-20`}>\r\n        <div className=\"mb-6\">\r\n          <Input\r\n            type={isPasswordShow ? \"text\" : \"password\"}\r\n            placeholder={\"Введите новый пароль\"}\r\n            icon={isPasswordShow ? \"HideIcon\" : \"ShowIcon\"}\r\n            ref={inputRef}\r\n            onIconClick={onIconClick}\r\n            value={formPassword}\r\n            onChange={(e) => {\r\n              dispatch({\r\n                type: SET_FORM_PASSWORD,\r\n                formPassword: e.target.value,\r\n              });\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Введите код из письма\"}\r\n            value={formConfirmationCode}\r\n            onChange={(e) => {\r\n              dispatch({\r\n                type: SET_CONFIRMATION_CODE,\r\n                formConfirmationCode: e.target.value,\r\n              });\r\n            }}\r\n          />\r\n        </div>\r\n        <Button\r\n          type=\"primary\"\r\n          htmlType=\"button\"\r\n          size=\"medium\"\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            dispatch(setNewPassword(formPassword, formConfirmationCode));\r\n          }}\r\n        >\r\n          Сохранить\r\n        </Button>\r\n      </form>\r\n      <div>\r\n        <div className={styles.displayFlex}>\r\n          <p className={`${styles.text} text text_type_main-default`}>\r\n            Вспомнили пароль?\r\n          </p>\r\n          <Link to=\"/login\">\r\n            <p className={`${styles.link} text text_type_main-default`}>\r\n              Войти\r\n            </p>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      {redirectToLogin && <Redirect to=\"/login\" />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ResetPasswordForm;\r\n","import { FC } from \"react\";\r\nimport AuthenticationForm from \"../../components/AuthenticationForm/AuthenticationForm\";\r\nimport ResetPasswordForm from \"../../components/ResetPasswordForm/ResetPasswordForm\";\r\nimport { useHistory, Redirect } from \"react-router-dom\";\r\n\r\nexport const ResetPasswordPage: FC = () => {\r\n  const history = useHistory();\r\n  const redirect = history.location.state !== \"forgot-password\";\r\n  return (\r\n    <>\r\n      <AuthenticationForm>\r\n        <ResetPasswordForm />\r\n      </AuthenticationForm>\r\n      {redirect && <Redirect to=\"/\" />}\r\n    </>\r\n  );\r\n};\r\n","import { FC } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const NotFoundPage: FC = () => (\r\n  <>\r\n    <div\r\n      style={{\r\n        margin: \"0 auto\",\r\n        maxWidth: \"600px\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <h2>Ой! Ошибка 404</h2>\r\n      <p>\r\n        Страница не существует. Кликните для перехода на{\" \"}\r\n        <Link to=\"/\">\r\n          <span style={{ color: \"#4C4CFF\" }}>главную страницу</span>\r\n        </Link>\r\n      </p>\r\n    </div>\r\n  </>\r\n);\r\n","import { FC } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect, NavLink } from \"react-router-dom\";\r\nimport { makeLogout } from \"../../services/actions/authorization-actions\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\nimport styles from \"./PersonalAreaForm.module.css\";\r\n\r\nconst PersonalAreaMenu: FC<{ description: string }> = ({ description }) => {\r\n  const dispatch = useDispatch();\r\n  const { error, redirectToLogin } = useSelector(\r\n    (store: RootState) => store.authorizationReducer\r\n  );\r\n  return (\r\n    <div className=\"mr-15\">\r\n      {error && (\r\n        <h2\r\n          className=\"mb-6 text text_type_main-medium\"\r\n          style={{ color: \"red\" }}\r\n        >\r\n          {error}\r\n        </h2>\r\n      )}\r\n      <ul className=\"mb-20\">\r\n        <li className=\"mt-4 mb-4\">\r\n          <NavLink\r\n            exact\r\n            to=\"/profile\"\r\n            className=\"text text_type_main-medium text_color_inactive\"\r\n            activeClassName={styles.colorActive}\r\n          >\r\n            Профиль\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"mt-4 mb-4\">\r\n          <NavLink\r\n            exact\r\n            to=\"/profile/orders\"\r\n            className=\"text text_type_main-medium text_color_inactive\"\r\n            activeClassName={styles.colorActive}\r\n          >\r\n            История заказов\r\n          </NavLink>\r\n        </li>\r\n        <li\r\n          style={{ cursor: \"pointer\" }}\r\n          onClick={() => {\r\n            dispatch(makeLogout());\r\n          }}\r\n        >\r\n          <p className=\"mt-4 mb-4 text text_type_main-medium text_color_inactive\">\r\n            Выход\r\n          </p>\r\n        </li>\r\n      </ul>\r\n      <p className=\"text text_type_main-default text_color_inactive\">\r\n        В этом разделе вы можете\r\n      </p>\r\n      <p className=\"text text_type_main-default text_color_inactive\">\r\n        {description}\r\n      </p>\r\n      {redirectToLogin && <Redirect to=\"/\" />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonalAreaMenu;\r\n","import React, { FC, useEffect, useState } from \"react\";\r\nimport {\r\n  Input,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"./PersonalAreaForm.module.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\nimport {\r\n  getUserData,\r\n  changeUserData,\r\n  SET_FORM_NAME,\r\n  SET_FORM_EMAIL,\r\n  SET_FORM_PASSWORD,\r\n  UNSET_ERROR,\r\n} from \"../../services/actions/authorization-actions\";\r\n\r\nconst PersonalAreaForm: FC = () => {\r\n  const { formEmail, formName, formPassword } = useSelector(\r\n    (store: RootState) => store.authorizationReducer\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  const [isNameEdit, setNameEdit] = useState(false);\r\n  const [isLoginEdit, setLoginEdit] = useState(false);\r\n  const [isPasswordEdit, setPasswordEdit] = useState(false);\r\n  const [changeButtons, setChangeButtons] = useState(false);\r\n  const NameRef = React.useRef<HTMLInputElement | null>(null);\r\n  const LoginRef = React.useRef<HTMLInputElement | null>(null);\r\n  const PassRef = React.useRef<HTMLInputElement | null>(null);\r\n\r\n  const onIconClick = (param: string) => () => {\r\n    if (param === \"name\") {\r\n      !isNameEdit && NameRef.current?.focus();\r\n      setNameEdit(!isNameEdit);\r\n    }\r\n    if (param === \"login\") {\r\n      !isLoginEdit && LoginRef.current?.focus();\r\n      setLoginEdit(!isLoginEdit);\r\n    }\r\n    if (param === \"password\") {\r\n      !isPasswordEdit && PassRef.current?.focus();\r\n      setPasswordEdit(!isPasswordEdit);\r\n    }\r\n    setChangeButtons(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserData());\r\n    return () => {\r\n      dispatch({ type: UNSET_ERROR });\r\n    };\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <form\r\n      className={`${styles.flexColumnCenter}`}\r\n      onSubmit={(e) => {\r\n        e.preventDefault();\r\n        dispatch(changeUserData(formEmail, formPassword, formName));\r\n      }}\r\n    >\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type={\"text\"}\r\n          placeholder={\"Имя\"}\r\n          icon={isNameEdit ? \"CloseIcon\" : \"EditIcon\"}\r\n          onIconClick={onIconClick(\"name\")}\r\n          ref={NameRef}\r\n          onFocus={() => {\r\n            setNameEdit(true);\r\n            setChangeButtons(true);\r\n          }}\r\n          onBlur={() => setNameEdit(false)}\r\n          value={formName}\r\n          onChange={(e) =>\r\n            dispatch({\r\n              type: SET_FORM_NAME,\r\n              formName: e.target.value,\r\n            })\r\n          }\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type={\"text\"}\r\n          placeholder={\"Логин\"}\r\n          icon={isLoginEdit ? \"CloseIcon\" : \"EditIcon\"}\r\n          onIconClick={onIconClick(\"login\")}\r\n          ref={LoginRef}\r\n          onFocus={() => {\r\n            setLoginEdit(true);\r\n            setChangeButtons(true);\r\n          }}\r\n          onBlur={() => setLoginEdit(false)}\r\n          value={formEmail}\r\n          onChange={(e) =>\r\n            dispatch({\r\n              type: SET_FORM_EMAIL,\r\n              formEmail: e.target.value,\r\n            })\r\n          }\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type={isPasswordEdit ? \"text\" : \"password\"}\r\n          placeholder={\"Пароль\"}\r\n          icon={isPasswordEdit ? \"CloseIcon\" : \"EditIcon\"}\r\n          onIconClick={onIconClick(\"password\")}\r\n          ref={PassRef}\r\n          onFocus={() => {\r\n            setPasswordEdit(true);\r\n            setChangeButtons(true);\r\n          }}\r\n          onBlur={() => setPasswordEdit(false)}\r\n          value={formPassword}\r\n          onChange={(e) =>\r\n            dispatch({\r\n              type: SET_FORM_PASSWORD,\r\n              formPassword: e.target.value,\r\n            })\r\n          }\r\n        />\r\n      </div>\r\n      {changeButtons && (\r\n        <div>\r\n          <span\r\n          className={styles.cancelButton}\r\n            onClick={(e) => {\r\n              e.preventDefault()\r\n              dispatch(getUserData());\r\n            }}\r\n          >\r\n            Отмена\r\n          </span>\r\n          <Button type=\"primary\" htmlType=\"submit\" size=\"medium\">\r\n            Сохранить\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonalAreaForm;\r\n","import { FC } from \"react\";\r\nimport PersonalAreaMenu from \"../../components/PersonalArea/PersonalAreaMenu\";\r\nimport PersonalAreaForm from \"../../components/PersonalArea/PersonalAreaForm\"\r\nimport styles from \"./profile.module.css\"\r\n\r\nexport const ProfilePage: FC = () => (\r\n  <>\r\n    <div className={styles.container}>\r\n      <PersonalAreaMenu\r\n        description=\"изменить свои персональные данные\"\r\n      />\r\n      <div>\r\n        <PersonalAreaForm />\r\n      </div>\r\n    </div>\r\n  </>\r\n);\r\n","import {\r\n  TypedUseSelectorHook,\r\n  useDispatch as dispatchHook,\r\n  useSelector as selectorHook\r\n} from 'react-redux';\r\nimport { AppDispatch, AppThunk, RootState } from '../types';\r\n\r\n\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>(); \r\n","import * as _ from \"lodash\";\r\nimport { useCallback, useEffect, useState, FC } from \"react\";\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport style from \"./OrderBox.module.css\";\r\nimport { CurrencyIcon, FormattedDate } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { TOrderBox, TData } from \"../../services/types\";\r\n\r\nconst OrderBox: FC<TOrderBox> = ({ element }) => {\r\n  const { data } = useSelector((store) => store.appReducer);\r\n  const [ingredients, setIngredients] = useState<null | Array<TData>>(null);\r\n\r\n  useEffect(() => {\r\n    element.ingredients &&\r\n      setIngredients(\r\n        element.ingredients.map(\r\n          (el) => [...data].filter((elem: TData) => elem._id === el)[0]\r\n        )\r\n      );\r\n  }, [data, element]);\r\n\r\n  const dateToString = useCallback(() => {\r\n    const inputDate = new Date(element?.createdAt);\r\n    return <FormattedDate date={inputDate} />\r\n  }, [element?.createdAt])\r\n\r\n\r\n  return (\r\n    <div className={style.container}>\r\n      <div className={`${style.flexSpaceBetween} mb-6`}>\r\n        <p className=\"text text_type_digits-default\">{element.number}</p>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n          {dateToString()}\r\n        </p>\r\n      </div>\r\n      <h2 className=\"text text_type_main-medium mb-6\">{element.name}</h2>\r\n      <div className={style.flexSpaceBetween}>\r\n        <div className={style.priceContainer}>\r\n          {ingredients?.map((el, index) => {\r\n            if (index < 5) {\r\n              return (\r\n                <img\r\n                  src={el?.image_mobile}\r\n                  alt={el?.name}\r\n                  className={style.ingredientImage}\r\n                  key={_.uniqueId()}\r\n                />\r\n              );\r\n            }\r\n\r\n            if (index > 5) return null;\r\n            return (\r\n              <p\r\n                key={_.uniqueId()}\r\n                style={{\r\n                  backgroundImage: `url(${ingredients[5]?.image_mobile})`,\r\n                  backgroundPosition: \"center\",\r\n                  backgroundRepeat: \"no-repeat\",\r\n                }}\r\n                className={`${style.ingredientImage} ${style.lastIngredientImage} text text_type_main-default`}\r\n              >\r\n                +{ingredients.length - 5}\r\n              </p>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className={style.priceContainer}>\r\n          <p className=\"text text_type_digits-default mr-2\">\r\n            {ingredients?.reduce((acc, el) => (acc += Number(el?.price)), 0)}\r\n          </p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderBox;\r\n","import { useSelector } from \"../../services/hooks\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport * as _ from \"lodash\";\r\nimport PersonalAreaMenu from \"../../components/PersonalArea/PersonalAreaMenu\";\r\nimport styles from \"./order-history.module.css\";\r\nimport OrderBox from \"../../components/OrderBox/OrderBox\";\r\nimport { FC } from \"react\";\r\n\r\nexport const OrdersHistoryPage: FC = () => {\r\n  const { errorWSOrderHistory, orders } = useSelector(\r\n    (store) => store.wsOrderHistoryReducer\r\n  );\r\n\r\n  let location = useLocation();\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.container}>\r\n        <PersonalAreaMenu description=\"просмотреть свою историю заказов\" />\r\n        {errorWSOrderHistory && (\r\n          <h2 className=\"text text_type_main-medium mb-2\">\r\n            {errorWSOrderHistory}\r\n          </h2>\r\n        )}\r\n        <div className={styles.scrollbar}>\r\n          {orders &&\r\n            orders.map((element) => (\r\n              <Link\r\n                to={{\r\n                  pathname: `/profile/orders/${element.number}`,\r\n                  state: { background: location },\r\n                }}\r\n                key={_.uniqueId()}\r\n              >\r\n                <OrderBox element={element} key={_.uniqueId()} />\r\n              </Link>\r\n            ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import {FC} from \"react\";\r\nimport styles from \"./IngredientDetails.module.css\";\r\nimport { TData } from \"../../services/types\";\r\n\r\nconst IngredientDetails: FC<{ selectedIngredient: TData }> = ({ selectedIngredient }) => {\r\n\r\n  return (\r\n    <>\r\n      <img\r\n        src={selectedIngredient.image_large}\r\n        alt={selectedIngredient.name}\r\n        className=\"mb-4\"\r\n      />\r\n      <h2 className=\"text text_type_main-medium mb-8\">\r\n        {selectedIngredient.name}\r\n      </h2>\r\n      <div className={`${styles.informationContainer} mb-15`}>\r\n        <div className={styles.flexCenter}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            Калории,ккал\r\n          </p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            {selectedIngredient.calories}\r\n          </p>\r\n        </div>\r\n        <div className={styles.flexCenter}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            Белки, г\r\n          </p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            {selectedIngredient.proteins}\r\n          </p>\r\n        </div>\r\n        <div className={styles.flexCenter}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            Жиры, г\r\n          </p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            {selectedIngredient.fat}\r\n          </p>\r\n        </div>\r\n        <div className={styles.flexCenter}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            Углеводы, г\r\n          </p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            {selectedIngredient.carbohydrates}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n  \r\n  export default IngredientDetails;\r\n","import { FC } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport IngredientDetails from \"../../components/IngredientDetails/IngredientDetails\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\nimport styles from \"./burger-ingredient-page.module.css\";\r\n\r\nexport const BurgerIngredientPage: FC = () => {\r\n  const { id } = useParams<{id?: string}>();\r\n  const selectedIngredient = useSelector((store: RootState) =>\r\n    store.appReducer.data\r\n      && store.appReducer.data.filter((el: any) => el._id === id)[0]\r\n  );\r\n  \r\n  return (\r\n    <>\r\n      <div className={styles.modal}>\r\n        <header className={`${styles.modalHeader} pt-10 pl-10 pr-10`}>\r\n          <h2 className=\"text text_type_main-large\">Детали ингредиента</h2>\r\n        </header>\r\n\r\n        <section className={`${styles.modalMain} mt-4`}>\r\n          {selectedIngredient && <IngredientDetails selectedIngredient={selectedIngredient}/>}\r\n        </section>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import { FC } from \"react\";\r\nimport styles from \"./ModalOverlay.module.css\";\r\n\r\nconst ModalOverlay: FC<{handleModalClose: () => void}> = ({handleModalClose}) => {   \r\n  return <div className={styles.modalOverlay} onClick={handleModalClose}></div>;\r\n};\r\n\r\n  export default ModalOverlay;\r\n","import { FC, useCallback, useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"./Modal.module.css\";\r\nimport ModalOverlay from \"../ModalOverlay/ModalOverlay\";\r\nimport { TModalWindow } from \"../../services/types\";\r\n\r\nconst modalRoot = document.getElementById(\"react-modals\");\r\n\r\nconst Modal: FC<TModalWindow> = ({ children, title, handleModalClose }) => {\r\n  const closeModalWindowByEsc = useCallback(\r\n    (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        handleModalClose();\r\n      }\r\n    },\r\n    [handleModalClose]\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", closeModalWindowByEsc, false);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", closeModalWindowByEsc, false);\r\n    };\r\n  }, [closeModalWindowByEsc]);\r\n\r\n  return modalRoot ? ReactDOM.createPortal(\r\n    <>\r\n      <ModalOverlay handleModalClose={handleModalClose}/>\r\n      <div className={styles.modal}>\r\n        <header className={`${styles.modalHeader} pt-10 pl-10 pr-10`}>\r\n          <h2 className=\"text text_type_main-large\">{title}</h2>\r\n          <button\r\n            type=\"button\"\r\n            className={styles.modalButton}\r\n            onClick={handleModalClose}\r\n          >\r\n            <CloseIcon type=\"primary\" />\r\n          </button>\r\n        </header>\r\n        <section className={`${styles.modalMain} mt-4`}>{children}</section>\r\n      </div>\r\n    </>,\r\n    modalRoot\r\n  ) : null;\r\n};\r\n\r\nexport default Modal;\r\n","import { FC } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Modal from \"../../components/Modal/Modal\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\nimport IngredientDetails from \"../../components/IngredientDetails/IngredientDetails\";\r\n\r\nexport const BurgerIngredientModal: FC = () => {\r\n  const history = useHistory();\r\n  const { id } = useParams<{id?: string}>();\r\n  const selectedIngredient = useSelector((store: RootState) =>\r\n    store.appReducer.data\r\n      && store.appReducer.data.filter((el: any) => el._id === id)[0]\r\n  );\r\n\r\n  return (\r\n    <Modal\r\n      title=\"Детали ингредиента\"\r\n      handleModalClose={() => {\r\n        history.push(\"/\");\r\n      }}\r\n    >\r\n      <IngredientDetails selectedIngredient={selectedIngredient}/>\r\n    </Modal>\r\n  );\r\n};","export default __webpack_public_path__ + \"static/media/done.fb9f8534.svg\";","import {FC} from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\nimport doneImg from \"../../images/done.svg\";\r\n\r\nconst OrderDetails: FC = () => {\r\n  const { orderNumber } = useSelector((store: RootState) => store.appReducer);\r\n  return (\r\n    <>\r\n      <h2 className=\"text text_type_digits-large mb-8\">{orderNumber}</h2>\r\n      <p className=\"text text_type_main-medium mb-15\">идентификатор заказа</p>\r\n      <img src={doneImg} alt=\"doneLogo\" className=\"mb-15\" />\r\n      <p className=\"text text_type_main-default mb-2\">\r\n        Ваш заказ начали готовить\r\n      </p>\r\n      <p className=\"text text_type_main-default text_color_inactive mb-30\">\r\n        Дождитесь готовности на орбитальной станции\r\n      </p>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderDetails;\r\n","import { FC } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Modal from \"../../components/Modal/Modal\";\r\nimport OrderDetails from \"../../components/OrderDetails/OrderDetails\";\r\n\r\nexport const OrderDetailsModal: FC = () => {\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <Modal\r\n      title=\"\"\r\n      handleModalClose={() => {\r\n        history.push(\"/\");\r\n      }}\r\n    >\r\n      <OrderDetails/>\r\n    </Modal>\r\n  );\r\n};","import { useSelector } from \"../../services/hooks\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport * as _ from \"lodash\";\r\nimport style from \"./order-tape-page.module.css\";\r\nimport OrderBox from \"../../components/OrderBox/OrderBox\";\r\nimport { FC } from \"react\";\r\n\r\nexport const OrderTapePage: FC = () => {\r\n  const { total, totalToday, orders, errorWSOrderTape } = useSelector(\r\n    (store) => store.wsOrderTapeReducer\r\n  );\r\n  let location = useLocation();\r\n\r\n  return (\r\n    <>\r\n      <section className={style.container}>\r\n        <h2 className=\"text text_type_main-large mb-5\">\r\n          {errorWSOrderTape ? errorWSOrderTape : \"Лента заказов\"}\r\n        </h2>\r\n        <div className={style.innerContainer}>\r\n          <div className={style.feedContainer}>\r\n            {orders &&\r\n              orders.map((el) => {\r\n                return (\r\n                  <Link\r\n                    to={{\r\n                      pathname: `feed/${el.number}`,\r\n                      state: { background: location },\r\n                    }}\r\n                    key={_.uniqueId()}\r\n                  >\r\n                    <OrderBox element={el} key={el._id} />\r\n                  </Link>\r\n                );\r\n              })}\r\n          </div>\r\n          <div className={style.infoContainer}>\r\n            <div className={`${style.ordersBoard} mb-15`}>\r\n              <div className=\"mr-8\">\r\n                <h3 className=\"text text_type_main-medium mb-6\">Готовы:</h3>\r\n                <div>\r\n                  {orders &&\r\n                    orders.map(\r\n                      (el, index) =>\r\n                        index < 10 &&\r\n                        el.status === \"done\" && (\r\n                          <p\r\n                            className=\"text text_type_digits-default\"\r\n                            style={{ color: \"#00CCCC\" }}\r\n                            key={el.number}\r\n                          >\r\n                            {el.number}\r\n                          </p>\r\n                        )\r\n                    )}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <h3 className=\"text text_type_main-medium mb-6\">В работе:</h3>\r\n                <div>\r\n                  {orders &&\r\n                    orders.map(\r\n                      (el, index) =>\r\n                        index < 10 &&\r\n                        el.status !== \"done\" && (\r\n                          <p\r\n                            className=\"text text_type_digits-default\"\r\n                            key={el.number}\r\n                          >\r\n                            {el.number}\r\n                          </p>\r\n                        )\r\n                    )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"mb-15\">\r\n              <h2 className=\"text text_type_main-medium\">\r\n                Выполнено за все время:\r\n              </h2>\r\n              <p className=\"text text_type_digits-large\">{total}</p>\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text text_type_main-medium\">\r\n                Выполнено за сегодня:\r\n              </h2>\r\n              <p className=\"text text_type_digits-large\">{totalToday}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  );\r\n};\r\n","import { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC } from \"react\";\r\nimport styles from \"./OrderIngredients.module.css\";\r\n\r\nconst OrderIngredientInfo: FC<{ingredient: [string, number]}> = ({ ingredient }) => {\r\n  const [el, qty] = ingredient;\r\n  const element = JSON.parse(el);\r\n  return (\r\n    <div className={`${styles.displayFlex} mb-4`}>\r\n      <div className={styles.displayFlex}>\r\n        <img src={element.image_mobile} alt={element.name} className={`${styles.ingredientImage} mr-4`}/>\r\n        <p>{element.name}</p>\r\n      </div>\r\n      <div className={styles.displayFlex}>\r\n        <p className=\"mr-2\">\r\n          {`${qty} x ${element.price}`}\r\n        </p>\r\n        <CurrencyIcon type=\"primary\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default OrderIngredientInfo;","import { FC } from \"react\";\r\nimport {\r\n  CloseIcon,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback } from \"react\";\r\nimport * as _ from \"lodash\";\r\nimport styles from \"./OrderIngredients.module.css\";\r\nimport OrderIngredientInfo from \"./OrderIngredientsInfo\";\r\nimport { TOrderIngredients } from \"../../services/types\";\r\n\r\nconst OrderIngredients: FC<TOrderIngredients> = ({\r\n  order,\r\n  handleModalClose,\r\n  isModal,\r\n  ingredients,\r\n}) => {\r\n  const dateToString = useCallback(() => {\r\n    if (order) {\r\n      const inputDate = new Date(order.createdAt);\r\n      const dateNow = new Date();\r\n      const outputDate =\r\n        dateNow.getMonth() === inputDate?.getMonth() &&\r\n        dateNow.getDate() === inputDate.getDate()\r\n          ? \"Сегодня\"\r\n          : `${inputDate?.getDate()}-${\r\n              inputDate?.getMonth() + 1\r\n            }-${inputDate?.getFullYear()}`;\r\n      const outputTime = `${inputDate?.getHours()}:${\r\n        inputDate?.getMinutes() < 10\r\n          ? `0${inputDate?.getMinutes()}`\r\n          : inputDate?.getMinutes()\r\n      }`;\r\n      const GMT = dateNow.getHours() - dateNow.getUTCHours();\r\n      return `${outputDate}, ${outputTime} i-GMT${GMT > 0 ? `+${GMT}` : GMT}`;\r\n    } else {\r\n      return \"\";\r\n    }\r\n  }, [order]);\r\n\r\n  const justifyContentCenter = !isModal\r\n    ? { justifyContent: \"center\" }\r\n    : { justifyContent: \"spaceBetween\" };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.modalHeader} style={justifyContentCenter}>\r\n        <h2 className=\"text text_type_digits-default mb-5\">#{order?.number}</h2>\r\n        {isModal && (\r\n          <button\r\n            type=\"button\"\r\n            className={styles.modalButton}\r\n            onClick={handleModalClose}\r\n          >\r\n            <CloseIcon type=\"primary\" />\r\n          </button>\r\n        )}\r\n      </div>\r\n      <h2 className=\"text text_type_main-medium  mb-2\">{order?.name}</h2>\r\n      <p\r\n        className=\"text text_type_main-default mb-15\"\r\n        style={{ color: \"#00CCCC\" }}\r\n      >\r\n        {order?.status === \"done\" ? \"Выполнен\" : \"В работе\"}\r\n      </p>\r\n      <h2 className=\"text text_type_main-medium mb-6\">Состав:</h2>\r\n      <div className={styles.scrollContainer}>\r\n        {ingredients &&\r\n          Object.entries(ingredients).map((el) => (\r\n            <OrderIngredientInfo key={_.uniqueId()} ingredient={el} />\r\n          ))}\r\n      </div>\r\n      <div className={`${styles.displayFlex}`} style={{ marginTop: \"48px\" }}>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n          {dateToString()}\r\n        </p>\r\n        <div className={styles.displayFlex}>\r\n          <p className=\"text text_type_digits-default mr-2\">\r\n            {ingredients &&\r\n              Object.entries(ingredients).reduce(\r\n                (acc, [key, val]) =>\r\n                  (acc += Number(JSON.parse(key).price) * Number(val)),\r\n                0\r\n              )}\r\n          </p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderIngredients;\r\n","import { useCallback, useEffect, FC } from \"react\";\r\nimport { TOrderIngredientsModal } from \"../../services/types\";\r\nimport ModalOverlay from \"../ModalOverlay/ModalOverlay\";\r\nimport style from \"./OrderIngredientModal.module.css\";\r\nimport OrderIngredients from \"../OrderIngredients/OrderIngredients\";\r\n\r\nconst OrderIngredientModal: FC<TOrderIngredientsModal> = ({ order, handleModalClose, ingredients }) => {\r\n  const closeModalWindowByEsc = useCallback(\r\n    (e) => {\r\n      if (e.key === 'Escape') {\r\n        handleModalClose && handleModalClose();\r\n      }\r\n    },\r\n    [handleModalClose]\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", closeModalWindowByEsc, false);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", closeModalWindowByEsc, false);\r\n    };\r\n  }, [closeModalWindowByEsc]);\r\n  \r\n  return(\r\n    <>\r\n      <ModalOverlay handleModalClose={handleModalClose}/>\r\n      <div className={style.modal}>\r\n        <OrderIngredients order={order} handleModalClose={handleModalClose} ingredients={ingredients} isModal={true}/>\r\n      </div>\r\n    </>\r\n  )\r\n};\r\n\r\nexport default OrderIngredientModal;","import ReactDOM from \"react-dom\";\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport OrderIngredientModal from \"../../components/OrderIngredientModal/OrderIngredientModal\";\r\nimport { FC } from \"react\";\r\n\r\nconst modalRoot = document.getElementById(\"react-modals\");\r\n\r\nexport const OrderIngredientModalPage: FC<{ profile: boolean }> = ({ profile }) => {\r\n  const history: any = useHistory();\r\n  const { id } = useParams<{id: string}>();\r\n  const selectedOrder = useSelector((store) => {\r\n    return !profile\r\n      ? store.wsOrderTapeReducer.orders &&\r\n          store.wsOrderTapeReducer.orders.filter((el) => +el.number === +id)[0]\r\n      : store.wsOrderHistoryReducer.orders &&\r\n          store.wsOrderHistoryReducer.orders.filter(\r\n            (el) => +el.number === +id\r\n          )[0];\r\n  });\r\n  const data = useSelector((store) => store.appReducer.data);\r\n\r\n  const ingredients = selectedOrder?.ingredients\r\n    .map((el) => data.filter((elem) => elem._id === el)[0])\r\n    .reduce((acc: {[k: string]: number}, element) => {\r\n      const key = JSON.stringify(element);\r\n      acc[key] = (acc[key] || 0) + 1;\r\n      return acc;\r\n    }, {});\r\n\r\n  return modalRoot ? ReactDOM.createPortal(\r\n    <OrderIngredientModal\r\n      order={selectedOrder}\r\n      ingredients={ingredients}\r\n      handleModalClose={() => {\r\n        history.push(`${history.location.state.background.pathname}`);\r\n      }}\r\n    />,\r\n    modalRoot\r\n  ) : null;\r\n};\r\n","import { useSelector } from \"../../services/hooks\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport OrderIngredients from \"../../components/OrderIngredients/OrderIngredients\";\r\nimport { FC } from \"react\";\r\n\r\nexport const OrderIngredientPage: FC<{ profile: boolean }> = ({ profile }) => {\r\n  const { id } = useParams<{id: string}>();\r\n\r\n  const selectedOrder = useSelector((store) => {\r\n    return !profile\r\n      ? store.wsOrderTapeReducer.orders &&\r\n          store.wsOrderTapeReducer.orders.filter((el) => +el.number === +id)[0]\r\n      : store.wsOrderHistoryReducer.orders &&\r\n          store.wsOrderHistoryReducer.orders.filter(\r\n            (el) => +el.number === +id\r\n          )[0];\r\n  });\r\n\r\n  const data = useSelector((store) => store.appReducer.data);\r\n\r\n  const ingredients = selectedOrder?.ingredients\r\n    .map((el) => data?.filter((elem) => elem._id === el)[0])\r\n    .reduce((acc: {[k: string]: number}, element) => {\r\n      const key = JSON.stringify(element);\r\n      acc[key] = (acc[key] || 0) + 1;\r\n      return acc;\r\n    }, {});\r\n\r\n  return (\r\n    <>\r\n      <div style={{maxWidth:\"640px\", margin:\"120px auto 0\"}}>\r\n        <OrderIngredients order={selectedOrder} ingredients={ingredients} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import { Route, Switch, useLocation, useHistory } from \"react-router-dom\";\r\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\r\nimport {\r\n  HomePage,\r\n  LoginPage,\r\n  RegisterPage,\r\n  ForgotPasswordPage,\r\n  ResetPasswordPage,\r\n  NotFoundPage,\r\n  ProfilePage,\r\n  OrdersHistoryPage,\r\n  BurgerIngredientPage,\r\n  BurgerIngredientModal,\r\n  OrderDetailsModal,\r\n  OrderTapePage,\r\n  OrderIngredientModalPage,\r\n  OrderIngredientPage,\r\n} from \"../../pages\";\r\nimport { useEffect, FC } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getUserData } from \"../../services/actions/authorization-actions\";\r\n\r\nconst ModalSwitch: FC = () => {\r\n  const location: any = useLocation();\r\n  const history: any = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserData());\r\n  }, [dispatch]);\r\n\r\n  let background =\r\n    (history.action === \"PUSH\" || history.action === \"REPLACE\") &&\r\n    location.state &&\r\n    location.state.background;\r\n\r\n  return (\r\n    <>\r\n      <Switch location={background || location}>\r\n        <ProtectedRoute path=\"/login\"  onlyUnAuth = {false} exact={true}>\r\n          <LoginPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/register\" onlyUnAuth = {false} exact={true}>\r\n          <RegisterPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/forgot-password\"  onlyUnAuth = {false} exact={true}>\r\n          <ForgotPasswordPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/reset-password\"  onlyUnAuth = {false} exact={true}>\r\n          <ResetPasswordPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/profile\" exact={true} onlyUnAuth={true}>\r\n          <ProfilePage />\r\n        </ProtectedRoute>\r\n        <Route path=\"/profile/orders/:id\" exact={false}>\r\n          <OrderIngredientPage profile={true} />\r\n        </Route>\r\n        <ProtectedRoute path=\"/profile/orders\" exact={true} onlyUnAuth={true}>\r\n          <OrdersHistoryPage />\r\n        </ProtectedRoute>\r\n        <Route path=\"/feed\" exact={true}>\r\n          <OrderTapePage />\r\n        </Route>\r\n        <Route path=\"/feed/:id\" exact={true}>\r\n          <OrderIngredientPage profile={false}/>\r\n        </Route>\r\n        <Route path=\"/ingredients/:id\">\r\n          <BurgerIngredientPage />\r\n        </Route>\r\n        <Route path=\"/\" exact={true}>\r\n          <HomePage />\r\n        </Route>\r\n        <Route>\r\n          <NotFoundPage />\r\n        </Route>\r\n      </Switch>\r\n      {background && (\r\n        <>\r\n          <ProtectedRoute\r\n            path=\"/profile/orders/:id\"\r\n            onlyUnAuth={true}\r\n            exact={false}\r\n          >\r\n            <OrderIngredientModalPage profile={true} />\r\n          </ProtectedRoute>\r\n          <Route path=\"/ingredients/:id\" exact={true}>\r\n            <BurgerIngredientModal />\r\n          </Route>\r\n          <Route path=\"/order-details\" exact={true}>\r\n            <OrderDetailsModal />\r\n          </Route>\r\n          <Route path=\"/feed/:id\" exact={true}>\r\n            <OrderIngredientModalPage profile={false}/>\r\n          </Route>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ModalSwitch;\r\n","import {FC} from \"react\";\r\nimport { Link, useRouteMatch } from \"react-router-dom\";\r\nimport {\r\n  Logo,\r\n  ProfileIcon,\r\n  BurgerIcon,\r\n  ListIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"./AppHeader.module.css\";\r\n\r\n  const Header: FC = () => {\r\n    const isConstructor = !!useRouteMatch({ path: \"/\", exact: true });\r\n    const isProfile = !!useRouteMatch(\"/profile\");\r\n    const isOrderTape = !!useRouteMatch(\"/feed\");\r\n  \r\n    return (\r\n      <header className={styles.header}>\r\n        <nav className={styles.container}>\r\n          <ul className={styles.menu}>\r\n            <li>\r\n              <ul className={styles.flex}>\r\n                <li className={`${styles.menuItems} pl-5 pr-5 pb-4 pt-4 mr-2`}>\r\n                  <Link to=\"/\" style={{ display: \"flex\", alignItems: \"center\" }}>\r\n                    <BurgerIcon type={isConstructor ? \"primary\" : \"secondary\"} />\r\n                    <p\r\n                      className={`ml-2 text_type_main-default ${\r\n                        !isConstructor && \"text_color_inactive\"\r\n                      }`}\r\n                    >\r\n                      Конструктор\r\n                    </p>\r\n                  </Link>\r\n                </li>\r\n                <li className={`${styles.menuItems} pl-5 pr-5 pb-4 pt-4 mr-2`}>\r\n                  <Link to=\"/feed\" style={{ display: \"flex\", alignItems: \"center\" }}>\r\n                    <ListIcon type={isOrderTape ? \"primary\" : \"secondary\"} />\r\n                    <p\r\n                      className={`ml-2 text_type_main-default ${\r\n                        !isOrderTape && \"text_color_inactive\"\r\n                      }`}\r\n                    >\r\n                      Лента заказов\r\n                    </p>\r\n                  </Link>\r\n                </li>\r\n              </ul>\r\n            </li>\r\n            <li>\r\n              <Link to=\"/\">\r\n                <Logo />\r\n              </Link>\r\n            </li>\r\n            <li className={`${styles.personalArea} pl-5 pr-5 pb-4 pt-4`}>\r\n              <Link to=\"/profile\">\r\n                <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n                  <ProfileIcon type={isProfile ? \"primary\" : \"secondary\"} />\r\n                  <p\r\n                    className={`ml-2 text_type_main-default ${\r\n                      !isProfile && \"text_color_inactive\"\r\n                    }`}\r\n                  >\r\n                    Личный кабинет\r\n                  </p>\r\n                </div>\r\n              </Link>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </header>\r\n    );\r\n};\r\n  \r\n  export default Header;","import { AnyAction, MiddlewareAPI } from \"redux\";\r\nimport { TOrderData } from \"../types\";\r\nconst url = \"wss://norma.nomoreparties.space/orders/all\";\r\n\r\nexport const WS_ORDER_TAPE_CONNECTION_INIT: \"WS_ORDER_TAPE_CONNECTION_INIT\" =\r\n  \"WS_ORDER_TAPE_CONNECTION_INIT\";\r\nexport const WS_ORDER_TAPE_CONNECTION_SUCCESS: \"WS_ORDER_TAPE_CONNECTION_SUCCESS\" =\r\n  \"WS_ORDER_TAPE_CONNECTION_SUCCESS\";\r\nexport const WS_ORDER_TAPE_CONNECTION_ERROR: \"WS_ORDER_TAPE_CONNECTION_ERROR\" =\r\n  \"WS_ORDER_TAPE_CONNECTION_ERROR\";\r\nexport const WS_ORDER_TAPE_CONNECTION_CLOSED: \"WS_ORDER_TAPE_CONNECTION_CLOSED\" =\r\n  \"WS_ORDER_TAPE_CONNECTION_CLOSED\";\r\nexport const WS_ORDER_TAPE_GET_MESSAGE: \"WS_ORDER_TAPE_GET_MESSAGE\" =\r\n  \"WS_ORDER_TAPE_GET_MESSAGE\";\r\n\r\nexport interface IOrderTapeConnectionInitAction {\r\n  readonly type: typeof WS_ORDER_TAPE_CONNECTION_INIT;\r\n}\r\n\r\nexport interface IOrderTapeConnectionSuccessAction {\r\n  readonly type: typeof WS_ORDER_TAPE_CONNECTION_SUCCESS;\r\n}\r\n\r\nexport interface IOrderTapeConnectionErrorAction {\r\n  readonly type: typeof WS_ORDER_TAPE_CONNECTION_ERROR;\r\n}\r\n\r\nexport interface IOrderTapeConnectionConnectionClosedAction {\r\n  readonly type: typeof WS_ORDER_TAPE_CONNECTION_CLOSED;\r\n}\r\n\r\nexport interface IOrderTapeConnectionGetMessageAction {\r\n  readonly type: typeof WS_ORDER_TAPE_GET_MESSAGE;\r\n  payload: {\r\n    total: number;\r\n    totalToday: number;\r\n    orders: Array<TOrderData>;\r\n  };\r\n}\r\n\r\nexport type TOrderTapeActions =\r\n  | IOrderTapeConnectionInitAction\r\n  | IOrderTapeConnectionSuccessAction\r\n  | IOrderTapeConnectionErrorAction\r\n  | IOrderTapeConnectionConnectionClosedAction\r\n  | IOrderTapeConnectionGetMessageAction;\r\n\r\nexport const orderTapeSocketMiddleware = () => {\r\n  return (store: MiddlewareAPI) => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return (next: (i: AnyAction) => void) => (action: AnyAction) => {\r\n      const { dispatch } = store;\r\n      const { type } = action;\r\n      if (type === WS_ORDER_TAPE_CONNECTION_INIT) {\r\n        socket = new WebSocket(url);\r\n      }\r\n\r\n      if (type === WS_ORDER_TAPE_CONNECTION_CLOSED) {\r\n        socket?.close();\r\n      }\r\n\r\n      if (socket) {\r\n        socket.onopen = (event) => {\r\n          dispatch({ type: WS_ORDER_TAPE_CONNECTION_SUCCESS, payload: event });\r\n        };\r\n        socket.onmessage = (event) => {\r\n          const { total, totalToday, orders } = JSON.parse(event.data);\r\n          dispatch({\r\n            type: WS_ORDER_TAPE_GET_MESSAGE,\r\n            payload: { total, totalToday, orders },\r\n          });\r\n        };\r\n        socket.onerror = (event) => {\r\n          dispatch({ type: WS_ORDER_TAPE_CONNECTION_ERROR, payload: event });\r\n        };\r\n        socket.onclose = (event) => {\r\n          dispatch({ type: WS_ORDER_TAPE_CONNECTION_CLOSED, payload: event });\r\n        };\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};\r\n","import React, {FC, useEffect } from \"react\";\r\nimport { HashRouter } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getData } from \"../../services/actions/app-actions\";\r\nimport ModalSwitch from \"./ModalSwitch\"\r\nimport Header from \"../AppHeader/AppHeader\";\r\nimport {RootState} from \"../../services/reducers/rootReducer\";\r\nimport { WS_ORDER_TAPE_CONNECTION_INIT } from \"../../services/actions/order-tape-actions\";\r\nimport { WS_ORDER_HISTORY_CONNECTION_INIT } from \"../../services/actions/order-history-actions\";\r\n\r\nconst App:FC = () => {\r\n  const { authorized } = useSelector((store: RootState) => store.authorizationReducer)\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getData());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: WS_ORDER_TAPE_CONNECTION_INIT })\r\n  }, [dispatch])\r\n\r\n  useEffect(() => {\r\n    authorized && dispatch({ type: WS_ORDER_HISTORY_CONNECTION_INIT })\r\n  }, [authorized, dispatch])\r\n\r\n  return (\r\n    <HashRouter>\r\n      <Header />\r\n      <ModalSwitch />\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { SET_CURRENT_BURGER_INGREDIENTS_NAME, IInterfaceAction } from \"../actions/interface-actions\";\r\nimport { TInterfaceReducerState } from \"../types\";\r\n\r\nexport const initialState: TInterfaceReducerState = {\r\n  currentBurgerIngredientsName: \"Булки\",\r\n};\r\n\r\nexport const interfaceReducer = (state = initialState, action: IInterfaceAction\r\n  ): TInterfaceReducerState => {\r\n  switch (action.type) {\r\n    case SET_CURRENT_BURGER_INGREDIENTS_NAME: {\r\n      return {\r\n        ...state,\r\n        currentBurgerIngredientsName: action.ingredientsName,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import * as _ from \"lodash\";\r\nimport {\r\n  SET_DATA,\r\n  SET_MAIN_ERROR,\r\n  SET_ORDER_NUMBER,\r\n  DELETE_INGREDIENT_FROM_INGREDIENTS,\r\n  REPLACE_INNER_DRAG_INGREDIENT,\r\n  SET_ADDED_INGREDIENT\r\n} from \"../actions/app-actions\";\r\nimport { TAppReducerState, TData } from \"../types\";\r\nimport { TAppActions } from \"../actions/app-actions\";\r\n\r\nexport const initialState: TAppReducerState = {\r\n  data: [],\r\n  error: null,\r\n  bun: null,\r\n  ingredients: [],\r\n  selectedIngredient: null,\r\n  orderNumber: null,\r\n};\r\n\r\nexport const appReducer = (state = initialState, action: TAppActions): TAppReducerState => {\r\n  switch (action.type) {\r\n    case SET_DATA: {\r\n      return {\r\n        ...state,\r\n        data: action.data,\r\n      };\r\n    }\r\n    case SET_MAIN_ERROR: {\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n      };\r\n    }\r\n    case SET_ADDED_INGREDIENT: {\r\n      const newState =\r\n        action.ingredient.type === \"bun\"\r\n          ? { ...state, bun: action.ingredient }\r\n          : {\r\n            ...state,\r\n            ingredients: [\r\n              ...state.ingredients,\r\n              {\r\n                ...action.ingredient,\r\n                key: _.uniqueId(action.ingredient._id),\r\n              },\r\n            ],\r\n          };\r\n      return { ...newState };\r\n    }\r\n    case SET_ORDER_NUMBER: {\r\n      return {\r\n        ...state,\r\n        orderNumber: action.orderNumber,\r\n        bun: null,\r\n        ingredients: [],\r\n      };\r\n    }\r\n    case DELETE_INGREDIENT_FROM_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        ingredients: state.ingredients.filter((el: TData) => el.key !== action.key)\r\n      }\r\n    }\r\n    case REPLACE_INNER_DRAG_INGREDIENT: {\r\n      const dragCard = [...state.ingredients][action.dragIndex];\r\n      if (!dragCard) {\r\n        return {\r\n          ...state\r\n        }\r\n      }\r\n      const newArray = [...state.ingredients];\r\n      newArray.splice(action.dragIndex, 1);\r\n      newArray.splice(action.hoverIndex, 0, dragCard);\r\n      return {\r\n        ...state,\r\n        ingredients: newArray,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { TAuthorizationActions } from \"../actions/authorization-actions\";\r\nimport { TAuthorizationReducerState } from \"../types\";\r\nimport {\r\n  SET_FORM_NAME,\r\n  SET_FORM_EMAIL,\r\n  SET_FORM_PASSWORD,\r\n  SET_LOGIN,\r\n  SET_REDIRECT_TO_MAIN,\r\n  UNSET_REDIRECT_TO_MAIN,\r\n  SET_LOGOUT,\r\n  SET_REDIRECT_TO_RESET_PASSWORD,\r\n  UNSET_REDIRECT_TO_RESET_PASSWORD,\r\n  SET_REDIRECT_TO_LOGIN,\r\n  SET_CONFIRMATION_CODE,\r\n  UNSET_ERROR,\r\n  SET_ERROR,\r\n  SET_REDIRECT_TO_LOGIN_FOR_ORDER,\r\n  UNSET_REDIRECT_TO_LOGIN_FOR_ORDER,\r\n  SET_REDIRECT_TO_ORDER_DETAILS,\r\n  UNSET_REDIRECT_TO_ORDER_DETAILS,\r\n} from \"../actions/authorization-actions\";\r\n\r\nexport const initialState: TAuthorizationReducerState = {\r\n  error: null,\r\n  formName: \"\",\r\n  formEmail: \"\",\r\n  formPassword: \"\",\r\n  redirectToMain: false,\r\n  redirectToResetPassword: false,\r\n  redirectToLogin: false,\r\n  redirectToLoginForOrder: false,\r\n  formConfirmationCode: \"\",\r\n  authorized: false,\r\n  redirectToOrderDetails: false,\r\n};\r\n\r\nexport const authorizationReducer = (\r\n  state = initialState,\r\n  action: TAuthorizationActions): TAuthorizationReducerState => {\r\n  switch (action.type) {\r\n    case SET_FORM_NAME: {\r\n      return {\r\n        ...state,\r\n        formName: action.formName,\r\n      };\r\n    }\r\n    case SET_FORM_EMAIL: {\r\n      return {\r\n        ...state,\r\n        formEmail: action.formEmail,\r\n      };\r\n    }\r\n    case SET_FORM_PASSWORD: {\r\n      return {\r\n        ...state,\r\n        formPassword: action.formPassword,\r\n      };\r\n    }\r\n    case SET_LOGIN: {\r\n      return {\r\n        ...state,\r\n        authorized: true,\r\n      };\r\n    }\r\n    case SET_ERROR: {\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n      };\r\n    }\r\n    case SET_REDIRECT_TO_MAIN: {\r\n      return {\r\n        ...state,\r\n        redirectToMain: true,\r\n      };\r\n    }\r\n    case UNSET_REDIRECT_TO_MAIN: {\r\n      return {\r\n        ...state,\r\n        redirectToMain: false,\r\n      };\r\n    }\r\n    case SET_LOGOUT: {\r\n      return {\r\n        ...initialState,\r\n      };\r\n    }\r\n    case SET_REDIRECT_TO_RESET_PASSWORD: {\r\n      return {\r\n        ...state,\r\n        redirectToResetPassword: true,\r\n      };\r\n    }\r\n    case UNSET_REDIRECT_TO_RESET_PASSWORD: {\r\n      return {\r\n        ...state,\r\n        redirectToResetPassword: false,\r\n      };\r\n    }\r\n    case SET_REDIRECT_TO_LOGIN: {\r\n      return {\r\n        ...state,\r\n        redirectToLogin: true,\r\n      };\r\n    }\r\n    case SET_REDIRECT_TO_LOGIN_FOR_ORDER: {\r\n      return {\r\n        ...state,\r\n        redirectToLoginForOrder: true,\r\n      };\r\n    }\r\n    case UNSET_REDIRECT_TO_LOGIN_FOR_ORDER: {\r\n      return {\r\n        ...state,\r\n        redirectToLoginForOrder: false,\r\n      };\r\n    }\r\n    case SET_REDIRECT_TO_ORDER_DETAILS: {\r\n      return {\r\n        ...state,\r\n        redirectToOrderDetails: true,\r\n      };\r\n    }\r\n    case UNSET_REDIRECT_TO_ORDER_DETAILS: {\r\n      return {\r\n        ...state,\r\n        redirectToOrderDetails: false,\r\n      };\r\n    }\r\n    case SET_CONFIRMATION_CODE: {\r\n      return {\r\n        ...state,\r\n        formConfirmationCode: action.formConfirmationCode,\r\n      };\r\n    }\r\n    case UNSET_ERROR: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { TOrderTapeActions } from \"../actions/order-tape-actions\";\r\nimport { TOrderTapeReducerState } from \"../types\";\r\nimport {\r\n  WS_ORDER_TAPE_CONNECTION_SUCCESS,\r\n  WS_ORDER_TAPE_GET_MESSAGE,\r\n  WS_ORDER_TAPE_CONNECTION_ERROR,\r\n  WS_ORDER_TAPE_CONNECTION_CLOSED,\r\n} from \"../actions/order-tape-actions\";\r\n\r\nexport const initialState: TOrderTapeReducerState = {\r\n  wsOrderTapeConnected: false,\r\n  total: null,\r\n  totalToday: null,\r\n  orders: null,\r\n  errorWSOrderTape: null,\r\n};\r\n\r\nexport const wsOrderTapeReducer = (\r\n  state = initialState,\r\n  action: TOrderTapeActions\r\n): TOrderTapeReducerState => {\r\n  switch (action.type) {\r\n    case WS_ORDER_TAPE_CONNECTION_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        wsOrderTapeConnected: true,\r\n        errorWSOrderTape: null,\r\n      };\r\n    }\r\n    case WS_ORDER_TAPE_GET_MESSAGE: {\r\n      const { total, totalToday, orders } = action.payload;\r\n      return {\r\n        ...state,\r\n        total,\r\n        totalToday,\r\n        orders,\r\n      };\r\n    }\r\n    case WS_ORDER_TAPE_CONNECTION_ERROR: {\r\n      return {\r\n        ...state,\r\n        errorWSOrderTape:\r\n          \"Ошибка соединения. Попробуйте перезагрузить страницу\",\r\n        wsOrderTapeConnected: false,\r\n      };\r\n    }\r\n    case WS_ORDER_TAPE_CONNECTION_CLOSED: {\r\n      return {\r\n        ...state,\r\n        wsOrderTapeConnected: false,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { TOrderHistoryActions } from \"../actions/order-history-actions\";\r\nimport { TOrderHistoryReducerState } from \"../types\";\r\nimport {\r\n  WS_ORDER_HISTORY_CONNECTION_SUCCESS,\r\n  WS_ORDER_HISTORY_GET_MESSAGE,\r\n  WS_ORDER_HISTORY_CONNECTION_ERROR,\r\n  WS_ORDER_HISTORY_CONNECTION_CLOSED,\r\n} from \"../actions/order-history-actions\";\r\n\r\nexport const initialState: TOrderHistoryReducerState = {\r\n  wsOrderHistoryConnected: false,\r\n  orders: null,\r\n  errorWSOrderHistory: null,\r\n};\r\n\r\nexport const wsOrderHistoryReducer = (\r\n  state = initialState,\r\n  action: TOrderHistoryActions\r\n): TOrderHistoryReducerState => {\r\n  switch (action.type) {\r\n    case WS_ORDER_HISTORY_CONNECTION_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        wsOrderHistoryConnected: true,\r\n        errorWSOrderHistory: null,\r\n      };\r\n    }\r\n    case WS_ORDER_HISTORY_GET_MESSAGE: {\r\n      return {\r\n        ...state,\r\n        orders: action.payload,\r\n      };\r\n    }\r\n    case WS_ORDER_HISTORY_CONNECTION_ERROR: {\r\n      return {\r\n        ...state,\r\n        errorWSOrderHistory:\r\n          \"Ошибка соединения. Попробуйте перезагрузить страницу, отключить блокировщик рекламы и перелогиниться\",\r\n        wsOrderHistoryConnected: false,\r\n      };\r\n    }\r\n    case WS_ORDER_HISTORY_CONNECTION_CLOSED: {\r\n      return {\r\n        ...state,\r\n        wsOrderHistoryConnected: false,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport { interfaceReducer } from \"./interface-reducer\";\r\nimport { appReducer } from \"./app-reducer\";\r\nimport { authorizationReducer } from \"./authorization-reducer\";\r\nimport { wsOrderTapeReducer } from \"./order-tape-reducer\";\r\nimport { wsOrderHistoryReducer } from \"./order-history-reducer\";\r\n\r\nexport const rootReducer = combineReducers({\r\n  interfaceReducer,\r\n  appReducer,\r\n  authorizationReducer,\r\n  wsOrderTapeReducer,\r\n  wsOrderHistoryReducer,\r\n});\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App/App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { applyMiddleware } from \"redux\";\r\nimport {legacy_createStore as createStore} from \"redux\"\r\nimport { Provider } from \"react-redux\";\r\nimport { rootReducer } from \"./services/reducers/rootReducer\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from \"redux-thunk\";\r\nimport { orderTapeSocketMiddleware } from \"./services/actions/order-tape-actions\";\r\nimport { orderHistorySocketMiddleware } from \"./services/actions/order-history-actions\";\r\n\r\n\r\nexport const store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(\r\n    applyMiddleware(thunk, \r\n    orderTapeSocketMiddleware(),\r\n    orderHistorySocketMiddleware())\r\n  )\r\n);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n      <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OrderBox_container__2CNIf\",\"flexSpaceBetween\":\"OrderBox_flexSpaceBetween__-LT8X\",\"priceContainer\":\"OrderBox_priceContainer__3txkR\",\"ingredientImage\":\"OrderBox_ingredientImage__3sE0I\",\"lastIngredientImage\":\"OrderBox_lastIngredientImage__2Csyp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerConstructor\":\"BurgerConstructor_burgerConstructor__AQsSU\",\"scrollbar\":\"BurgerConstructor_scrollbar__2cipn\",\"mainIngredients\":\"BurgerConstructor_mainIngredients__riLz-\",\"orderContainer\":\"BurgerConstructor_orderContainer__24HGj\",\"totalPriceContainer\":\"BurgerConstructor_totalPriceContainer__1S6u9\",\"burgerConstructorIngredientPlace\":\"BurgerConstructor_burgerConstructorIngredientPlace__2yen3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flexColumnCenter\":\"LoginForm_flexColumnCenter__3gwd9\",\"displayFlex\":\"LoginForm_displayFlex__1Bygw\",\"text\":\"LoginForm_text__1kxfM\",\"link\":\"LoginForm_link__2A3F_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppHeader_header__3gTiG\",\"container\":\"AppHeader_container__3xLVB\",\"flex\":\"AppHeader_flex__2ADuU\",\"menu\":\"AppHeader_menu__1MTGN\",\"menuItems\":\"AppHeader_menuItems__3Y7uA\",\"menuNavLink\":\"AppHeader_menuNavLink__1nal_\",\"personalArea\":\"AppHeader_personalArea__3D470\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PersonalAreaForm_container__Caeip\",\"flexColumnCenter\":\"PersonalAreaForm_flexColumnCenter__sL6-t\",\"displayFlex\":\"PersonalAreaForm_displayFlex__1CjVf\",\"text\":\"PersonalAreaForm_text__32exU\",\"link\":\"PersonalAreaForm_link__A7r31\",\"colorActive\":\"PersonalAreaForm_colorActive__3BAeC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"informationContainer\":\"IngredientDetails_informationContainer__15A1R\",\"flexCenter\":\"IngredientDetails_flexCenter__1Soz7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-tape-page_container__1JZnm\",\"innerContainer\":\"order-tape-page_innerContainer__9ATUq\",\"feedContainer\":\"order-tape-page_feedContainer__28oFI\",\"infoContainer\":\"order-tape-page_infoContainer__1cVmc\",\"ordersBoard\":\"order-tape-page_ordersBoard__ABuTU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flexColumnCenter\":\"RegisterForm_flexColumnCenter__2a8PJ\",\"displayFlex\":\"RegisterForm_displayFlex__3JzR-\",\"text\":\"RegisterForm_text__fhxWR\",\"link\":\"RegisterForm_link__Qjtz9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flexColumnCenter\":\"ForgotPasswordForm_flexColumnCenter__20Uer\",\"displayFlex\":\"ForgotPasswordForm_displayFlex__Sh9zK\",\"text\":\"ForgotPasswordForm_text__g0DrK\",\"link\":\"ForgotPasswordForm_link__XQFga\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flexColumnCenter\":\"ResetPasswordForm_flexColumnCenter__2xSAR\",\"displayFlex\":\"ResetPasswordForm_displayFlex__2QRFr\",\"text\":\"ResetPasswordForm_text__2IuVi\",\"link\":\"ResetPasswordForm_link__3FSDV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"Modal_modal__Sg7gz\",\"modalHeader\":\"Modal_modalHeader__2CIZv\",\"modalMain\":\"Modal_modalMain__1VRAv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"home_main__1KTrq\",\"container\":\"home_container__1izNa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"burger-ingredient-page_modal__1Hvta\",\"modalHeader\":\"burger-ingredient-page_modalHeader__3pQ8Z\",\"modalMain\":\"burger-ingredient-page_modalMain__e7atU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AuthenticationForm_container__3662J\",\"flexColumnCenter\":\"AuthenticationForm_flexColumnCenter__2YN7R\",\"displayFlex\":\"AuthenticationForm_displayFlex__1Cau-\",\"text\":\"AuthenticationForm_text__p4T3X\",\"link\":\"AuthenticationForm_link__15FEu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-history_container__-2KDQ\",\"scrollbar\":\"order-history_scrollbar__2bF0M\"};"],"sourceRoot":""}